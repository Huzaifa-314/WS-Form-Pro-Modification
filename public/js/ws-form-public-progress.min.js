!function(s){"use strict";s.WS_Form.prototype.form_progress=function(){var e=this,r=this.get_field_value_fallback("progress",!1,"class_complete",[]);this.progress_class_complete=r.join(" ");var a=this.get_field_value_fallback("progress",!1,"class_incomplete",[]);this.progress_class_incomplete=a.join(" "),s("[data-required]:not([data-init-required])",this.form_canvas_obj).each(function(){var r=e.get_field(s(this)).type,a=s.WS_Form.field_type_cache[r].events.event;s(this).on(a,function(){e.form_progress_process()})}),s("[data-progress-include]:not([data-init-required])",this.form_canvas_obj).each(function(){var r=s(this).attr("data-progress-include");s(this).on(r,function(){e.form_progress_process()})}),this.form_progress_process(),this.form_progress_api_call_reset()},s.WS_Form.prototype.form_progress_process=function(){var e=this,r=[],a=0,t=0;s("[data-required]:not([data-required-bypass],[data-required-bypass-section],[data-required-bypass-group])",this.form_canvas_obj).each(function(){var o=e.get_field(s(this)).type,i=e.get_section_repeatable_index(s(this)),_=i>0?"["+i+"]":"",n=ws_form_settings.field_prefix+e.get_field_id(s(this))+_,p=!1;switch(o){case"radio":case"price_radio":if(void 0!==r[n])return;p=s(this)[0].checkValidity();break;case"signature":"function"==typeof e.signature_get_response_by_name&&(p=e.signature_get_response_by_name(n));break;case"email":p=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s(this).val());break;default:p=s(this)[0].checkValidity()}p&&t++,r[n]=!0,a++}),s("[data-progress-include]",this.form_canvas_obj).each(function(){s(this)[0].checkValidity()&&t++,a++});var o=a>0?Math.round(t/a*100):0;s('[data-progress-bar][data-source="form_progress"], .wsf-form-conversational-nav-progress',this.form_canvas_obj).each(function(){e.form_progress_set_value(s(this),o)})},s.WS_Form.prototype.form_progress_set_value=function(e,r){var a=s("[data-progress-bar-value]",e);if(a.length||(a=e),e.is("progress")){if(e.attr("max"))var t=parseFloat(e.attr("max"));else{t=100;e.attr("max",100)}var o=r/100*t;o>t&&(o=t);var i=a.val()!=o;a.val(o),i&&a.trigger("change"),e.attr("aria-valuemin",0).attr("aria-valuemax",t).attr("aria-valuenow",o)}else{i=a.attr("data-value")!=r;a.attr("data-value",r).css("width",r+"%"),i&&a.trigger("change"),void 0!==e.attr("aria-valuenow")&&e.attr("aria-valuenow",r),void 0!==a.attr("aria-valuenow")&&a.attr("aria-valuenow",r)}if(100==r?(e.addClass(this.progress_class_complete),e.removeClass(this.progress_class_incomplete)):(e.removeClass(this.progress_class_complete),e.addClass(this.progress_class_incomplete)),this.conversational&&e.hasClass("wsf-form-conversational-nav-progress"))var _=s(".wsf-form-conversational-nav-progress-help",this.form_canvas_obj),n=this.get_object_meta_value(this.form,"conversational_nav_progress_help","#progress_percent",!1,!1);else{var p=this.get_field(e);n=this.get_object_meta_value(p,"help","#progress_percent",!1,!1),_=this.get_help_obj(e)}if(_.length&&-1!==n.indexOf("#progress")){var c={progress_remaining_percent:100-r+"%",progress_remaining:100-r,progress_percent:r+"%",progress:r},l=this.mask_parse(n,c);l=this.parse_variables_process(l).output,_.html(l)}},s.WS_Form.prototype.form_progress_tabs=function(e){var r=this,a=s('[data-source="tab_progress"]',this.form_canvas_obj);if(a.length){var t=s(".wsf-group-tabs",this.form_canvas_obj).children(":not([data-wsf-group-hidden])").length;a.each(function(){var a=(parseInt(e)+1)/t*100;r.form_progress_set_value(s(this),Math.round(a))})}},s.WS_Form.prototype.form_progress_api_call_reset=function(){var e=this;s('[data-progress-bar][data-source="post_progress"]',this.form_canvas_obj).each(function(){e.form_progress_set_value(s(this),0)})},s.WS_Form.prototype.form_progress_api_call=function(e,r){if(r.lengthComputable){var a=this;e.each(function(){var e=r.loaded/r.total*100;a.form_progress_set_value(s(this),Math.round(e))})}}}(jQuery);