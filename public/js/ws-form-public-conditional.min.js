!function(e){"use strict";e.WS_Form.prototype.form_conditional=function(t){var a=this;if(void 0===t&&(t=!1),!1===this.conditional_cache){if(void 0===(h=this.get_object_meta_value(this.form,"conditional",!1)).groups)return!1;if(void 0===h.groups[0])return!1;if(void 0===h.groups[0].rows)return!1;for(var i in h.groups[0].rows)if(h.groups[0].rows.hasOwnProperty(i)){var s=h.groups[0].rows[i];if(null!==s&&(void 0===s.disabled||!s.disabled)&&void 0!==s.data&&void 0!==s.data[1]){var o=s.data[1];try{o=JSON.parse(o)}catch(e){o=!1}!1!==o&&(o.last_state=[],this.conditional_events(o,t),!1===this.conditional_cache&&(this.conditional_cache=[]),this.conditional_cache.push(o))}}}else for(var i in this.conditional_cache){if(this.conditional_cache.hasOwnProperty(i))(o=this.conditional_cache[i]).last_state=[],this.conditional_events(o,t)}for(var r in this.conditional_event_selector_to_condition)if(this.conditional_event_selector_to_condition.hasOwnProperty(r)){var c=this.conditional_event_selector_to_condition[r];for(var _ in c)if(c.hasOwnProperty(_)){var n=c[_],d=n.object_event_selector,l=n.object_event_obj,h=n.conditionals;if(t){"null"===r&&(r=null);l.each(function(){e(this).on(_,r,{conditionals:h},function(t,i,s,o){if(void 0===s||void 0===o||a.form_id===s||a.form_instance_id===o){var r=e(this).closest("[data-type]"),c=r.attr("data-repeatable-index")?r.attr("data-repeatable-index"):0;for(var _ in t.data.conditionals)if(t.data.conditionals.hasOwnProperty(_)){var n=t.data.conditionals[_];a.conditional_process(n,!1,e(this),c,t)}}})}),this.log("log_conditional_event",(null===r?this.language("debug_form"):r)+" ("+_+")","conditional")}e(d,this.form_canvas_obj).each(function(){if(void 0===e(this).attr("data-fired-conditional")){var t=e(this).closest("[data-type]"),i=t.attr("data-repeatable-index")?t.attr("data-repeatable-index"):0;for(var s in h)if(h.hasOwnProperty(s)){var o=h[s];a.conditional_process(o,!0,e(this),i,!1)}var r=e(this).attr("name");e('[name="'+r+'"]',this.form_canvas_obj).attr("data-fired-conditional","")}}),e("[data-fired-conditional]",this.form_canvas_obj).removeAttr("data-fired-conditional")}}},e.WS_Form.prototype.conditional_events=function(t,a){void 0===a&&(a=!0);var i=this,s=void 0!==this.framework.tabs.public.selector_href?this.framework.tabs.public.selector_href:"href";for(var o in t.if)if(t.if.hasOwnProperty(o)){var r=t.if[o];if(void 0!==r.conditions)for(var c in r.conditions)if(r.conditions.hasOwnProperty(c)){var _=r.conditions[c];if(this.conditional_condition_check(_)){var n=_.object,d=_.object_id,l=!!_.object_row_id&&parseInt(_.object_row_id,10),h=_.logic,u=_.value,v=[];switch(n){case"form":v.push(this.conditional_event_get(n,this.form_id,0,this.form,h));break;case"group":if(void 0===this.group_data_cache[d])break;var b=this.group_data_cache[d];v.push(this.conditional_event_get(n,d,l,b,h));break;case"section":if(void 0===this.section_data_cache[d])break;b=this.section_data_cache[d];v.push(this.conditional_event_get(n,d,l,b,h));break;case"field":if(void 0===this.field_data_cache[d])break;b=this.field_data_cache[d];var f=e.WS_Form.field_type_cache[b.type],p=void 0!==b.section_repeatable_section_id;v.push(this.conditional_event_get(n,d,l,b,h,p));var m=[];switch(h){case"field_match":case"field_match_not":var g=u;if(0==parseInt(g,10))break;if(void 0===this.field_data_cache[g])break;var k=this.field_data_cache[g];p=void 0!==k.section_repeatable_section_id;v.push(this.conditional_event_get("field",g,!1,k,h,p)),m.field_match_id=this.form_id_prefix+"field-"+g}var w=this.get_field_value_fallback(f,!1,"attribute_"+h,!1);if("object"==typeof w){var y="#"+this.form_id_prefix+n+"-"+d;for(var j in w)if(w.hasOwnProperty(j)){var x=w[j];x=this.mask_parse(x,m),e(y,this.form_canvas_obj).attr(j,x)}}break;case"submit":v.push(this.conditional_event_get(n,0,0,this.submit,h));break;case"user":v.push(this.conditional_event_get(n,0,0,!1,h))}for(var q in v)if(v.hasOwnProperty(q)){var A=v[q],O=(y=null,A.repeatable);if("wsf-validate"==A.event||"wsf-validate-silent"==A.event||"wsf-section-repeatable"==A.event){if(!a)continue;"wsf-section-repeatable"==A.event&&(A.event="wsf-section-repeatable-"+d);var I=this.form_canvas_obj;y=null}else if("wsf-rendered"==A.event||"wsf-submit"==A.event||"wsf-save"==A.event||"wsf-submit wsf-save"==A.event||"wsf-submit-complete"==A.event||"wsf-save-complete"==A.event||"wsf-complete"==A.event||"wsf-submit-error"==A.event||"wsf-save-error"==A.event||"wsf-error"==A.event||"wsf-submit-success"==A.event||"wsf-save-success"==A.event||"wsf-success"==A.event)I=e(document),y=null;else{I=this.form_canvas_obj;switch(A.object){case"form":y=null;break;case"group":y="["+s+'="#'+this.form_id_prefix+"group-"+d+'"]';break;case"section":y='[id^="'+this.form_id_prefix+A.object+"-"+A.object_id+'"][data-id="'+A.object_id+'"]';break;case"field":var F=this.field_data_cache[d];switch(F.type){case"radio":case"price_radio":case"checkbox":case"price_checkbox":y='[name^="'+ws_form_settings.field_prefix+d+'["],[name^="'+ws_form_settings.field_prefix+d+'["] ~ label';break;case"select":case"price_select":if(this.get_object_meta_value(F,"select2",!1)&&-1!==["click","mousedown","mouseup","mouseover","mouseout","touchstart","touchmove","touchend","touchcancel"].indexOf(A.event))if(O)y='[id^="'+this.form_id_prefix+A.object+"-wrapper-"+A.object_id+'-repeat-"] .select2';else y="#"+this.form_id_prefix+A.object+"-wrapper-"+A.object_id+" .select2";else if(O)y='[id^="'+this.form_id_prefix+A.object+"-"+A.object_id+'-repeat-"]';else y="#"+this.form_id_prefix+A.object+"-"+A.object_id;break;default:if(O)y='[id^="'+this.form_id_prefix+A.object+"-"+A.object_id+(!1!==A.object_row_id?"-row-"+A.object_row_id:"")+'-repeat-"]';else y="#"+this.form_id_prefix+A.object+"-"+A.object_id+(!1!==A.object_row_id?"-row-"+A.object_row_id:"")}}}if(A.create&&!1!==A.event&&!1!==y){var W=0;if(e(y).each(function(){e(this).attr("data-init-conditional")&&W++}),0===W)switch(A.event){case"recaptcha":this.recaptchas_conditions.push(function(){i.conditional_process(t,!1,e(y),0,!1)});break;case"hcaptcha":this.hcaptchas_conditions.push(function(){i.conditional_process(t,!1,e(y),0,!1)});break;case"turnstile":this.turnstiles_conditions.push(function(){i.conditional_process(t,!1,e(y),0,!1)});break;default:if(null===y&&(y="null"),void 0===this.conditional_event_selector_to_condition[y]&&(this.conditional_event_selector_to_condition[y]=[]),void 0===this.conditional_event_selector_to_condition[y][A.event]&&(this.conditional_event_selector_to_condition[y][A.event]={object_event_selector:y,object_event_obj:I,conditionals:[],event_processed:!1}),-1===this.conditional_event_selector_to_condition[y][A.event].conditionals.indexOf(t)&&this.conditional_event_selector_to_condition[y][A.event].conditionals.push(t),ws_form_settings.debug){var S=e(y,this.form_canvas_obj).attr("data-populate-event"),C=S?S.split(" "):[];C.push(A.event),S=(C=C.filter(function(e,t,a){return a.indexOf(e)===t})).join(" "),e(y,this.form_canvas_obj).attr("data-populate-event",S)}}}}}}}},e.WS_Form.prototype.conditional_event_get=function(t,a,i,s,o,r){void 0===r&&(r=!1);var c={object:t,object_id:a,object_row_id:i,create:!0,event:!1,row:!1,repeatable:r};switch(t){case"field":var _=e.WS_Form.field_type_cache[s.type];void 0!==_.conditional&&(void 0!==_.conditional.exclude_condition&&(c.create=!_.conditional.exclude_condition),void 0!==_.conditional.condition_event&&(c.event=_.conditional.condition_event),void 0!==_.conditional["object_event.row"]&&_.conditional["object_event.row"]&&!1!==i&&(c.row=!0))}var n=e.WS_Form.settings_form.conditional.objects[t].logic;return void 0!==n[o]&&void 0!==n[o].event&&(c.event=n[o].event),c},e.WS_Form.prototype.conditional_process=function(t,a,i,s,o){if(void 0===t.if)return!1;if(void 0===t.then)return!1;if(void 0===t.else)return!1;var r=!1;for(var c in t.if)if(t.if.hasOwnProperty(c)){var _=t.if[c];if(void 0!==_.conditions){var n=!1,d="";for(var l in _.conditions)if(_.conditions.hasOwnProperty(l)){var h=_.conditions[l];if(this.conditional_condition_check(h)){var u=h.object,v=h.object_id;if("object"==typeof(b=void 0!==h.object_row_id&&h.object_row_id))(b=b.map(function(e){return parseInt(e,10)})).length||(b=!1);else var b=""!==b&&[parseInt(b,10)];var f=h.logic,p=h.value,m=void 0===h.case_sensitive||h.case_sensitive,g=l>0?void 0===h.logic_previous?"||":h.logic_previous:"||",k=ws_form_settings.field_prefix+v,w=void 0===h.force_result?null:h.force_result;if(e.WS_Form.debug_rendered){switch(u){case"form":var y=this.form_obj;break;case"group":y=this.group_data_cache[v];break;case"section":y=this.section_data_cache[v];break;case"field":y=this.field_data_cache[v]}if(void 0!==y){var j=e.WS_Form.settings_form.conditional,x=j.logic_previous,q=j.objects[u].logic;if(void 0!==q[f])var A=q[f].text.toUpperCase();else A="";if(void 0!==x[g])var O=x[g].text.toUpperCase();else O="";d="<strong>"+(l>0?O+" ":"")+"IF ["+this.html_encode(y.label)+"] "+A+(""!=p?" '"+p+"'":"")+"</strong> ("+(void 0!==y.type?"Type: "+y.type+" | ":"")+"ID: "+v+(b?" | Row ID: "+b.join(", "):"")+") "}}switch(u){case"form":var I="#"+this.form_obj_id;break;case"group":I="#"+this.form_id_prefix+"group-"+v;break;case"section":I="#"+this.form_id_prefix+u+"-"+v;break;case"field":var F=s>0?"-repeat-"+s:"",W=(I="#"+this.form_id_prefix+u+"-"+v+F,e('[data-type][data-id="'+v+'"]'+(s>0?'[data-repeatable-index="'+s+'"]':""),this.form_canvas_obj))}var S=e(I,this.form_canvas_obj),C=S.length?S.val():"";!m&&C&&("string"==typeof C&&(C=C.toLowerCase()),"string"==typeof p&&(p=p.toLowerCase()));if(-1!==["r==","r!=","r>","r<","r>=","r<="].indexOf(f)){var D=e('[data-repeatable][data-id="'+v+'"]',this.form_canvas_obj);if(!D.length)continue;C=D.length}p=this.parse_variables_process(p).output;switch(f){case"d==":case"d!=":case"d>":case"d<":case"d>=":case"d<=":if(!1!==(N=void 0!==this.field_data_cache[v]&&this.field_data_cache[v])){var P=this.get_object_meta_value(N,"input_type_datetime","date"),z=this.get_object_meta_value(N,"format_date",ws_form_settings.date_format);z||(z=ws_form_settings.date_format),p=this.get_date(p,P,z),C=this.get_date(C,P,z)}break;case"==":case"!=":case">":case"<":case">=":case"<=":var N;if(!1!==(N=void 0!==this.field_data_cache[v]&&this.field_data_cache[v])){switch(N.type){case"price":case"price_subtotal":case"cart_price":case"cart_total":C=this.get_number(C,0,!0);break;default:C=this.get_number(C,0,!1)}p=parseFloat(p)}}var T=!1;switch(f){case"==":T=C==p;break;case"!=":T=C!=p;break;case">":T=C>p;break;case"<":T=C<p;break;case">=":T=C>=p;break;case"<=":T=C<=p;break;case"d==":""!=C&&""!=p&&(T=Date.parse(C)==Date.parse(p));break;case"d!=":""!=C&&""!=p&&(T=Date.parse(C)!=Date.parse(p));break;case"d>":""!=C&&""!=p&&(T=Date.parse(C)>Date.parse(p));break;case"d<":""!=C&&""!=p&&(T=Date.parse(C)<Date.parse(p));break;case"d>=":""!=C&&""!=p&&(T=Date.parse(C)>=Date.parse(p));break;case"d<=":""!=C&&""!=p&&(T=Date.parse(C)<=Date.parse(p));break;case"rc==":case"rc!=":T=(C=e('input[type="checkbox"]:not([data-wsf-select-all]):checked',W).length)==this.get_number(p),"rc!="==f&&(T=!T);break;case"rc>":T=(C=e('input[type="checkbox"]:not([data-wsf-select-all]):checked',W).length)>this.get_number(p);break;case"rc<":T=(C=e('input[type="checkbox"]:not([data-wsf-select-all]):checked',W).length)<this.get_number(p);break;case"rs==":case"rs!=":T=(C=e("option:not([data-placeholder]):selected",W).length)==this.get_number(p),"rc!="==f&&(T=!T);break;case"rs>":T=(C=e("option:not([data-placeholder]):selected",W).length)>this.get_number(p);break;case"rs<":T=(C=e("option:not([data-placeholder]):selected",W).length)<this.get_number(p);break;case"r==":T=this.get_number(C)==this.get_number(p);break;case"r!=":T=this.get_number(C)!=this.get_number(p);break;case"r>":""!=C&&(T=this.get_number(C)>this.get_number(p));break;case"r<":""!=C&&(T=this.get_number(C)<this.get_number(p));break;case"r>=":""!=C&&(T=this.get_number(C)>=this.get_number(p));break;case"r<=":""!=C&&(T=this.get_number(C)<=this.get_number(p));break;case"section_repeatable":t.last_state[s]="",T=o.type=="wsf-section-repeatable-"+v;break;case"equals":case"c==":T=C==p;break;case"equals_not":case"c!=":T=C!=p;break;case"contains":case"contains_not":T=-1!=C.indexOf(p),"contains_not"==f&&(T=!T);break;case"starts":case"starts_not":T=C.startsWith(p),"starts_not"==f&&(T=!T);break;case"ends":case"ends_not":T=C.endsWith(p),"ends_not"==f&&(T=!T);break;case"blank":case"blank_not":T=""==C,"blank_not"==f&&(T=!T);break;case"checked":case"checked_not":T=!1;for(var Z in b)if(b.hasOwnProperty(Z)){var L=b[Z],U="#"+this.form_id_prefix+u+"-"+v+"-row-"+L+F;T|=e(U,this.form_canvas_obj).is(":checked")}"checked_not"==f&&(T=!T);break;case"checked_any":case"checked_any_not":T=e("input:checked",W).length>0,"checked_any_not"==f&&(T=!T);break;case"checked_value_equals":case"checked_value_equals_not":T=e('input[value="'+p+'"]:checked',W).length;"checked_value_equals_not"==f&&(T=!T);break;case"selected":case"selected_not":T=!1;for(var Z in b)if(b.hasOwnProperty(Z)){L=b[Z];T|=e('option[data-id="'+L+'"]',e(I,this.form_canvas_obj)).prop("selected")}"selected_not"==f&&(T=!T);break;case"selected_any":case"selected_any_not":T=e("option:not([data-placeholder]):selected",e(I,this.form_canvas_obj)).length>0;"selected_any_not"==f&&(T=!T);break;case"selected_value_equals":case"selected_value_equals_not":T=e('option[value="'+p+'"]',e(I,this.form_canvas_obj)).prop("selected");"selected_value_equals_not"==f&&(T=!T);break;case"regex_email":case"regex_email_not":T=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(C),"regex_email_not"==f&&(T=!T);break;case"regex_url":case"regex_url_not":T=/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi.test(C),"regex_url_not"==f&&(T=!T);break;case"regex":case"regex_not":T=new RegExp(p).test(C),"regex_not"==f&&(T=!T);break;case"wsf-rendered":case"wsf-submit":case"wsf-save":case"wsf-submit-save":case"wsf-submit-complete":case"wsf-save-complete":case"wsf-complete":case"wsf-submit-error":case"wsf-save-error":case"wsf-error":case"wsf-submit-success":case"wsf-save-success":case"wsf-success":case"click":case"mousedown":case"mouseup":case"mouseover":case"mouseout":case"touchstart":case"touchmove":case"touchend":case"touchcancel":case"focus":case"blur":case"change":case"change_input":case"input":case"keyup":case"keydown":t.last_state[s]="",T=f==o.type||void 0!==o.handleObj&&void 0!==o.handleObj.origType&&f==o.handleObj.origType||"wsf-"+f==o.type||"change_input"==f&&-1!=["change","input"].indexOf(o.type)||"wsf-submit-save"==f&&-1!=["wsf-submit","wsf-save"].indexOf(o.type);break;case"token_validated":case"token_validated_not":T=!1!==this.submit&&void 0!==this.submit.token_validated&&this.submit.token_validated,"token_validated_not"==f&&(T=!T);break;case"user_logged_in":case"user_logged_in_not":case"user_role":case"user_role_not":case"user_capability":case"user_capability_not":T=w;break;case"ch>":T=360*this.hex_to_hsl(C).h>p;break;case"ch<":T=360*this.hex_to_hsl(C).h<p;break;case"cs>":T=100*this.hex_to_hsl(C).s>p;break;case"cs<":T=100*this.hex_to_hsl(C).s<p;break;case"cl>":T=100*this.hex_to_hsl(C).l>p;break;case"cl<":T=100*this.hex_to_hsl(C).l<p;break;case"recaptcha":case"recaptcha_not":this.recaptcha_get_response_by_name,T="string"==typeof(E=this.recaptcha_get_response_by_name(k))&&E.length>0,"recaptcha_not"==f&&(T=!T);break;case"hcaptcha":case"hcaptcha_not":this.hcaptcha_get_response_by_name,T="string"==typeof(E=this.hcaptcha_get_response_by_name(k))&&E.length>0,"hcaptcha_not"==f&&(T=!T);break;case"turnstile":case"turnstile_not":var E;this.turnstile_get_response_by_name,T="string"==typeof(E=this.turnstile_get_response_by_name(k))&&E.length>0,"turnstile_not"==f&&(T=!T);break;case"signature":case"signature_not":this.signature_get_response_by_name,T=this.signature_get_response_by_name(k),"signature_not"==f&&(T=!T);break;case"file":case"file_not":this.file_get_count_by_field_id,T=this.file_get_count_by_field_id(v)>0,"file_not"==f&&(T=!T);break;case"f>":this.file_get_count_by_field_id,T=this.file_get_count_by_field_id(v)>p;break;case"f<":this.file_get_count_by_field_id,T=this.file_get_count_by_field_id(v)<p;break;case"f==":case"f!=":this.file_get_count_by_field_id,T=this.file_get_count_by_field_id(v)==p,"f!="==f&&(T=!T);break;case"field_match":case"field_match_not":var Q=parseInt(p,10);if(Q>0){var R="#"+this.form_id_prefix+"field-"+Q;T=e(R,this.form_canvas_obj).val()==C,"field_match_not"==f&&(T=!T)}break;case"cc==":T=C.length==parseInt(p,10);break;case"cc!=":T=C.length!=parseInt(p,10);break;case"cc>":T=C.length>parseInt(p,10);break;case"cc<":T=C.length<parseInt(p,10);break;case"cw==":T=this.get_word_count(C)==parseInt(p,10);break;case"cw!=":T=this.get_word_count(C)!=parseInt(p,10);break;case"cw>":T=this.get_word_count(C)>parseInt(p,10);break;case"cw<":T=this.get_word_count(C)<parseInt(p,10);break;case"validate":case"validate_not":switch(u){case"form":T=this.form_valid;break;case"group":case"section":T=this.object_validate(e(I,this.form_canvas_obj));break;case"field":T=this.object_validate(W)}"validate_not"==f&&(T=!T)}n=this.conditional_logic_previous(n,T,g)}}g=c>0?void 0===_.logic_previous?"||":_.logic_previous:"||";r=this.conditional_logic_previous(r,n,g)}}var $=!1;if(r?!0===t.last_state[s]&&void 0!==t.last_state[s]||($="then",t.last_state[s]=!0):!1===t.last_state[s]&&void 0!==t.last_state[s]||($="else",t.last_state[s]=!1),!1!==$){var J=t[$];J.length&&(this.log("log_conditional_fired_"+$,d,"conditional"),this.conditional_process_actions(J,$,i,s))}!a&&this.has_ecommerce&&"function"==typeof this.form_ecommerce_calculate&&this.form_ecommerce_calculate()},e.WS_Form.prototype.conditional_process_actions=function(t,a,i,s){var o=0,r=!1,c=!1,_=!1,n=this;for(var d in t)if(t.hasOwnProperty(d)){var l=t[d];if(this.conditional_action_check(l)){var h=l.object,u=l.object_id,v=void 0!==l.object_row_id&&l.object_row_id,b=l.action;switch(h){case"form":var f=n.form_obj,p=n.form_obj,m=void 0!==l.value&&this.parse_variables_process(l.value,!1,!1,!1,!1,!1).output,g=this.conditional_process_action(a,b,f,p,h,u,v,m,!1);r=r||g.process_required,c=c||g.process_bypass,_=_||g.process_navigation;break;case"group":var k="#"+this.form_id_prefix+"group-"+u;f=p=e(k,this.form_canvas_obj),m=void 0!==l.value&&this.parse_variables_process(l.value,!1,!1,!1,!1,!1).output,g=this.conditional_process_action(a,b,f,p,h,u,v,m,!1);r=r||g.process_required,c=c||g.process_bypass,_=_||g.process_navigation;break;case"section":var w=this.get_section_id(i);if(!(j=e('[id^="'+this.form_id_prefix+'section-"][data-id="'+u+'"]',this.form_canvas_obj)).length)break;var y=j.first();w===parseInt(u,10)&&y.attr("data-repeatable-index")&&(j=j.filter('[data-repeatable-index="'+s+'"]')),j.each(function(){var t=void 0!==e(this).attr("data-repeatable-index")&&e(this).attr("data-repeatable-index"),i=void 0!==l.value&&n.parse_variables_process(l.value,t,!1,!1,!1,!1,!1).output,s=n.conditional_process_action(a,b,e(this),e(this),h,u,v,i,t);r=r||s.process_required,c=c||s.process_bypass,_=_||s.process_navigation});break;case"field":var j;w=this.get_section_id(i);if(!(j=e('[id^="'+this.form_id_prefix+'field-wrapper-"][data-id="'+u+'"],input[type="hidden"][data-id-hidden="'+u+'"]',this.form_canvas_obj)).length)break;y=j.first();w===this.get_section_id(y.first())&&y.attr("data-repeatable-index")&&(j=j.filter('[data-repeatable-index="'+s+'"]')),j.each(function(){var t=void 0!==e(this).attr("data-repeatable-index")&&e(this).attr("data-repeatable-index"),i=!1!==t?"-repeat-"+t:"",s="#"+n.form_id_prefix+"field-"+u+(v?"-row-"+v:"")+i,o=e(s,n.form_canvas_obj),d=void 0!==n.field_data_cache[u]&&n.field_data_cache[u],f=void 0!==l.value&&n.parse_variables_process(l.value,t,!1,d,!1,!1,!1).output,p=n.conditional_process_action(a,b,e(this),o,h,u,v,f,t);r=r||p.process_required,c=c||p.process_bypass,_=_||p.process_navigation});break;case"action":m=void 0!==l.value&&n.parse_variables_process(l.value,!1,!1,!1,!1,!1).output,g=n.conditional_process_action(a,b,e(this),!1,h,u,v,m,!1);r=r||g.process_required,c=c||g.process_bypass,_=_||g.process_navigation}o++}}return r&&("function"==typeof this.form_progress&&this.form_progress(),this.form_required()),c&&(this.form_bypass(!0),"function"==typeof this.form_tab_validation_process&&this.form_tab_validation_process()),_&&this.form_navigation(),o},e.WS_Form.prototype.conditional_process_action=function(t,a,i,s,o,r,c,_,n){void 0===_&&(_="");var d=void 0!==this.framework.tabs.public.selector_href?this.framework.tabs.public.selector_href:"href",l=ws_form_settings.field_prefix+r+(n?"["+n+"]":""),h=_,u=!1,v=!1,b=!1,f=!1;switch(a){case"value":case"value_number":case"value_datetime":case"value_tel":case"value_email":case"value_textarea":case"value_url":switch(i.attr("data-type")){case"price":case"cart_price":if(""===_&&(_="0"),isNaN(_))_=this.get_number(_);_=this.get_price(_)}s.attr("data-value-old",function(){return e(this).val()}).val(_).filter(function(){return e(this).val()!==e(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old"),"value_textarea"===a&&"function"==typeof this.textarea_set_value&&this.textarea_set_value(s,_);break;case"value_range":case"value_rating":s.attr("data-value-old",function(){return e(this).val()}).val(_).filter(function(){return e(this).val()!==e(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old");break;case"value_color":s.hasClass("minicolors-input")?s.attr("data-value-old",function(){return e(this).val()}).minicolors("value",{color:_}).filter(function(){return e(this).val()!==e(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old"):s.attr("data-value-old",function(){return e(this).val()}).val(_).filter(function(){return e(this).val()!==e(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old");break;case"html":e("[data-html],[data-text-editor]",i).html(_);break;case"text_editor":e("[data-text-editor]",i).html(_);break;case"button_html":s.html(_);break;case"class_add_wrapper":i.addClass(_),u="debug_action_added";break;case"class_remove_wrapper":i.removeClass(_),u="debug_action_removed";break;case"class_add_field":s.addClass(_),u="debug_action_added";break;case"class_remove_field":s.removeClass(_),u="debug_action_removed";break;case"reset_signature":"function"==typeof this.signature_clear_by_name&&(this.signature_clear_by_name(l),u="debug_action_reset");break;case"value_row_select":case"value_row_deselect":if(!s.is(":enabled"))break;var p=s.prop("selected")!==("value_row_select"==a);s.prop("selected",!1).prop("selected","value_row_select"==a),p&&s.closest("select").trigger("change"),u="debug_action_"+("value_row_select"==a?"selected":"deselected");break;case"value_row_select_value":case"value_row_deselect_value":p=e('option[value="'+this.html_encode(_)+'"]',s).prop("selected")!==("value_row_select_value"==a);e('option[value="'+this.html_encode(_)+'"]',s).prop("selected","value_row_select_value"==a),p&&s.trigger("change"),u="debug_action_"+("value_row_select_value"==a?"selected_value":"deselected_value");break;case"value_row_select_all":case"value_row_deselect_all":e("option",i).each(function(){if(e(this).is(":enabled")){var t=e(this).prop("selected")!==("value_row_select_all"==a);e(this).prop("selected",!1).prop("selected","value_row_select_all"==a),t&&e(this).closest("select").trigger("change"),u="debug_action_"+("value_row_select_all"==a?"selected":"deselected")}});break;case"value_row_reset":e("option:selected:enabled",i).prop("selected",!1).trigger("change"),u="debug_action_reset";break;case"value_row_check":case"value_row_uncheck":if(!s.is(":enabled"))break;p=s.prop("checked")!==("value_row_check"==a);s.prop("checked","value_row_check"==a),p&&s.trigger("change"),u="debug_action_"+("value_row_check"==a?"checked":"unchecked");break;case"value_row_check_value":case"value_row_uncheck_value":p=e('input[value="'+this.html_encode(_)+'"]',i).prop("checked")!==("value_row_check_value"==a);e('input[value="'+this.html_encode(_)+'"]',i).prop("checked","value_row_check_value"==a),p&&e('input[value="'+this.html_encode(_)+'"]',i).trigger("change"),u="debug_action_"+("value_row_check_value"==a?"checked":"unchecked");break;case"value_row_check_all":case"value_row_uncheck_all":e('input[type="checkbox"]',i).each(function(){if(e(this).is(":enabled")){var t=e(this).prop("checked")!==("value_row_check_all"==a);e(this).prop("checked","value_row_check_all"==a),t&&e(this).trigger("change"),u="debug_action_"+("value_row_check_all"==a?"checked":"unchecked")}});break;case"value_row_required":case"value_row_not_required":s.prop("required","value_row_required"==a).removeAttr("data-init-required"),"value_row_required"==a?s.attr("data-required","").attr("aria-required","true").removeAttr("data-conditional-logic-bypass"):s.removeAttr("data-required").removeAttr("aria-required").attr("data-conditional-logic-bypass",""),u="debug_action_"+("value_row_required"==a?"required":"not_required"),v=!0,b=!0;break;case"value_row_disabled":case"value_row_not_disabled":s.attr("disabled","value_row_disabled"==a),void 0!==s.parent().attr("data-wsf-select2")&&"function"==typeof this.form_select2&&this.form_select2(s.parent()),u="debug_action_"+("value_row_disabled"==a?"disabled":"enabled");break;case"value_row_visible":case"value_row_not_visible":"value_row_not_visible"===a?s.parent().hide():s.parent().show(),u="debug_action_"+("value_row_not_visible"==a?"hide":"show");break;case"value_row_focus":s.trigger("focus"),u="debug_action_focussed";break;case"value_row_class_add":s.addClass(_),u="debug_action_added";break;case"value_row_class_remove":s.removeClass(_),u="debug_action_removed";break;case"value_row_set_custom_validity":this.set_invalid_feedback(s,_,c),b=!0;break;case"min":case"max":case"step":case"low":case"high":case"optimum":_=""!=_&&this.get_float(_,0),this.obj_set_attribute(s,a,_);break;case"min_int":case"max_int":case"step_int":var m=a.replace("_int","");_=""!=_&&this.get_number(_,0,!1),this.obj_set_attribute(s,m,_);break;case"ecommerce_price_min":case"ecommerce_price_max":_=""!=_&&this.get_float(_,0);var g=s.val();this.obj_set_attribute(s,"data-ecommerce-"+("ecommerce_price_min"===a?"min":"max"),_),"function"==typeof this.form_ecommerce_input_mask_currency&&this.form_ecommerce_input_mask_currency(s),s.val()!==g&&s.trigger("change");break;case"select_min":case"select_max":var k="select_min"===a?"min":"max";_=""!=_&&this.get_number(_,0,!1);var w=void 0===i.attr("data-select-min-max-init");if(!1!==_?i.attr("data-select-"+k,_):i.removeAttr("data-select-"+k),w)"function"==typeof this.form_select_min_max&&this.form_select_min_max();else{var y=e('input[type="number"]',i);this.obj_set_attribute(y,k,_)}break;case"checkbox_min":case"checkbox_max":k="checkbox_min"===a?"min":"max";_=""!=_&&this.get_number(_,0,!1);var j=void 0===i.attr("data-checkbox-min-max-init");if(!1!==_?i.attr("data-checkbox-"+k,_):i.removeAttr("data-checkbox-"+k),j)"function"==typeof this.form_checkbox_min_max&&this.form_checkbox_min_max();else{y=e('input[type="number"]',i);this.obj_set_attribute(y,k,_)}break;case"visibility":switch(o){case"group":var x=e("["+d+'="#'+this.form_id_prefix+"group-"+r+'"]',this.form_canvas_obj).parent();if("off"===_){if(i.is(":visible")){var q=e('[id^="'+this.form_id_prefix+'group-"]:not([data-wsf-group-hidden])');if(q.length){var A=q.first().attr("id");e("["+d+'="#'+A+'"]').trigger("click")}}x.attr("data-wsf-group-hidden","").hide().attr("aria-live","polite").attr("aria-hidden","true"),i.attr("data-wsf-group-hidden","").attr("aria-live","polite").attr("aria-hidden","true"),u="debug_action_hide"}else x.removeAttr("data-wsf-group-hidden").show().removeAttr("aria-hidden"),i.removeAttr("data-wsf-group-hidden").removeAttr("aria-hidden"),u="debug_action_show";b=!0,f=!0;break;case"section":case"field":"off"===_?(i.hide().attr("aria-live","polite").attr("aria-hidden","true"),b=!0,u="debug_action_hide"):(i.show().removeAttr("aria-hidden"),b=!0,"function"==typeof this.signatures_redraw&&("section"==o&&this.signatures_redraw(!1,r),"field"==o&&this.signatures_redraw(!1,!1,r)),u="debug_action_show")}break;case"set_row_count":if(!(T=e('[data-repeatable][data-id="'+r+'"]',this.form_canvas_obj)).length)break;var O=T.length;if(isNaN(_))break;var I=parseInt(_,10),F=this.section_data_cache[r],W=this.get_object_meta_value(F,"section_repeat_min",1);(W=""==W||isNaN(W)?1:parseInt(W,10))<1&&(W=1);var S=this.get_object_meta_value(F,"section_repeat_max",!1);if(I<W&&(I=W),!1!==(S=""!=S&&!isNaN(W)&&parseInt(S,10))&&I>S&&(I=S),O<I){for(var C=T.last(),D=I-O,P=0;P<D;P++)"function"!=typeof this.section_clone&&this.section_clone(C);"function"!=typeof this.section_add_init&&this.section_add_init(r),this.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+r)}if(O>I){for(var z=O-I,N=0;N<z;N++){var T;(T=e('[data-repeatable][data-id="'+r+'"]',this.form_canvas_obj)).last().remove()}"function"!=typeof this.section_remove_init&&this.section_remove_init(r),this.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+r)}break;case"disabled":switch(o){case"section":i.prop("disabled","on"==_),"on"==_?i.attr("aria-disabled","true"):i.removeAttr("aria-disabled");var Z=e("[name]",i);break;case"field":Z=s}var L=this;e(Z).each(function(){e(this).prop("disabled","on"==_),"on"==_?e(this).attr("aria-disabled","true"):e(this).removeAttr("aria-disabled");var t=e(this).closest("[data-type]"),a=L.get_field_value_fallback(t.attr("data-type"),!1,"class_disabled",!1);switch("on"==_?(!1!==a&&e(this).addClass(a.join(" ")),e(this).css({"pointer-events":"none"}).attr("data-conditional-logic-bypass","")):(!1!==a&&e(this).removeClass(a.join(" ")),e(this).css({"pointer-events":"auto"}).removeAttr("data-conditional-logic-bypass")),t.attr("data-type")){case"file":switch(e(this).attr("data-file-type")){case"dropzonejs":"on"==_?e(".dropzone",t)[0].dropzone.disable():e(".dropzone",t)[0].dropzone.enable()}}}),f=!0,u="debug_action_"+("on"==_?"disabled":"enabled");break;case"required":switch((E=this.field_data_cache[r]).type){case"radio":case"price_radio":s=e('[name="'+l+'[]"]',i)}s.prop("required","on"==_).removeAttr("data-init-required"),"on"==_?s.attr("data-required","").attr("aria-required","true").removeAttr("data-conditional-logic-bypass"):s.removeAttr("data-required").removeAttr("aria-required").attr("data-conditional-logic-bypass",""),u="debug_action_"+("on"==_?"required":"not_required"),v=!0,b=!0;break;case"required_signature":s.prop("required","on"==_).removeAttr("data-init-required"),"on"==_?s.attr("data-required","").attr("aria-required","true").removeAttr("data-conditional-logic-bypass"):s.removeAttr("data-required").removeAttr("aria-required").attr("data-conditional-logic-bypass",""),u="debug_action_"+("on"==_?"required":"not_required"),v=!0,b=!0;break;case"readonly":s.prop("readonly","on"==_),"on"==_?s.attr("aria-readonly","true"):s.removeAttr("aria-readonly"),u="debug_action_"+("on"==_?"read_only":"not_read_only"),"function"==typeof this.form_date&&this.form_date();break;case"password_generate":"function"==typeof this.generate_password&&s.val(this.generate_password(16)).trigger("change");break;case"set_custom_validity":var U=!1;if(void 0!==this.field_data_cache[r]){var E=this.field_data_cache[r];if(void 0!==e.WS_Form.field_type_cache[E.type]){var Q=e.WS_Form.field_type_cache[E.type];U=void 0!==Q.invalid_feedback_last_row&&Q.invalid_feedback_last_row}}var R=e('[id^="'+this.form_id_prefix+"invalid-feedback-"+r+'"]',i);if(U)s=R.siblings('[id^="'+this.form_id_prefix+"field-"+r+'"]');this.set_invalid_feedback(s,_,c),b=!0;break;case"click":switch(o){case"group":e("["+d+'="#'+this.form_id_prefix+"group-"+r+'"]:not([data-wsf-tab-disabled])',this.form_canvas_obj).trigger("click");break;case"field":s.trigger("click")}u="debug_action_clicked";break;case"focus":this.conversational&&(this.conversational_scroll_start_x=this.form_obj.scrollLeft(),this.conversational_scroll_start_y=this.form_obj.scrollTop()),s.trigger("focus"),u="debug_action_focussed";break;case"action_run":-1!==this.conditional_actions_run_action.indexOf(r)&&this.form_post("action",r);break;case"action_run_on_save":-1===this.conditional_actions_run_save.indexOf(r)&&(this.conditional_actions_run_save.push(r),this.conditional_actions_changed=!0);break;case"action_run_on_submit":-1===this.conditional_actions_run_submit.indexOf(r)&&(this.conditional_actions_run_submit.push(r),this.conditional_actions_changed=!0);break;case"action_do_not_run_on_save":-1!==($=this.conditional_actions_run_save.indexOf(r))&&(this.conditional_actions_run_save.splice($,1),this.conditional_actions_changed=!0);break;case"action_do_not_run_on_submit":var $;-1!==($=this.conditional_actions_run_submit.indexOf(r))&&(this.conditional_actions_run_submit.splice($,1),this.conditional_actions_changed=!0);break;case"javascript":try{e.globalEval("(function($) {"+_+"})(jQuery);")}catch(e){this.error("error_js",_)}break;case"validate_show":this.form_obj.addClass(this.class_validated);break;case"validate_hide":this.form_obj.removeClass(this.class_validated);break;case"form_save":this.form_post("save");break;case"form_save_validate":this.form_post_if_validated("save");break;case"form_hash_clear":this.form_hash_clear();break;case"form_submit":this.form_obj.submit();break;case"form_clear":this.form_clear();break;case"form_reset":this.form_reset();break;case"reset":case"reset_file":case"clear":var J="clear"===a;switch(o){case"group":this.group_fields_reset(r,J);break;case"section":this.section_fields_reset(r,J,n);break;case"field":this.field_reset(r,J,i)}}if(e.WS_Form.debug_rendered){var B=!1;switch(o){case"form":B=this.language("debug_action_form");var G=this.language("debug_action_form");break;case"group":if(void 0!==this.group_data_cache[r]){var H=this.group_data_cache[r];B=this.language("debug_action_group"),G=H.label}break;case"section":if(void 0!==this.section_data_cache[r])H=this.section_data_cache[r],B=this.language("debug_action_section"),G=H.label;break;case"field":if(void 0!==this.field_data_cache[r])B=(H=this.field_data_cache[r]).type,G=H.label;break;case"action":if(void 0!==this.action_data_cache[r])H=this.action_data_cache[r],B=this.language("debug_action_action"),G=H.label}if(!1!==B){!1!==u&&(h=this.language(u));var K=e.WS_Form.settings_form.conditional.objects[o].action[a],M=K.text.toUpperCase();void 0!==K.values&&"object"==typeof K.values&&void 0!==K.values[_]&&(h=K.values[_].text);var V="<strong>["+this.html_encode(G)+"] "+M+(!1!==h&&""!=h?" '"+this.html_encode(h)+"'":"")+"</strong> ("+this.language("debug_action_type")+": "+B+" | ID: "+r+(c?" | "+this.language("debug_action_row")+" ID: "+c:"")+")";this.log("log_conditional_action_"+t,V,"conditional")}}return{process_required:v,process_bypass:b,process_navigation:f}},e.WS_Form.prototype.obj_set_attribute=function(e,t,a){void 0!==e.attr("data-"+t+"-bypass")?!1!==a?e.attr("data-"+t+"-bypass",a).trigger("change"):e.removeAttr("data-"+t+"-bypass").trigger("change"):!1!==a?e.attr(t,a).trigger("change"):e.removeAttr(t).trigger("change")},e.WS_Form.prototype.conditional_logic_previous=function(e,t,a){switch(a){case"||":e|=t;break;case"&&":e&=t}return e},e.WS_Form.prototype.conditional_condition_check=function(e){return!(null===e||"object"!=typeof e||void 0===e.id||void 0===e.object||void 0===e.object_id||void 0===e.object_row_id||void 0===e.logic||void 0===e.value||void 0===e.case_sensitive||void 0===e.logic_previous||""==e.id||0==e.id||""==e.object||""==e.object_id||""==e.logic)},e.WS_Form.prototype.conditional_action_check=function(e){return!(null===e||"object"!=typeof e||void 0===e.object||void 0===e.object_id||void 0===e.action||""==e.object||""==e.object_id||""==e.action)}}(jQuery);