!function($){"use strict";$.WS_Form=function(e){$.WS_Form.this=this,this.is_admin=this.set_is_admin(),this.user_roles=ws_form_settings.user_roles,this.form_interface=!1,this.group_data_cache=[],this.section_data_cache=[],this.field_data_cache=[],this.action_data_cache=[],this.validation_message_cache=[],this.invalid_feedback_cache=[],this.object_cache=[],this.object_cache.condition=[],this.object_cache.then=[],this.object_cache.else=[],this.action=!1,this.object_data_scratch=!1,this.form_history=[],this.history_index=0,this.framework_id=!1,this.framework=!1,this.framework_fields=!1,this.column_resize_obj=!1,this.column_size_value=0,this.column_size_value_old=0,this.offset_value=0,this.offset_value_old=0,this.dragged_field=null,this.dragged_field_in_section=null,this.dragged_section=null,this.dragged_section_in_group=null,this.dragging=!1,this.next_sibling_id_old=null,this.section_id_old=null,this.group_id_old=null,this.section_repeatable_dragged=!1,this.section_repeatable_indexes={},this.checksum=!1,this.checksum_setTimeout=!1,this.published_checksum="",this.recaptchas=[],this.recaptchas_v2_default=[],this.recaptchas_v2_invisible=[],this.recaptchas_v3_default=[],this.recaptchas_conditions=[],this.timeout_recaptcha=3e4,this.hcaptchas=[],this.hcaptchas_default=[],this.hcaptchas_invisible=[],this.hcaptchas_conditions=[],this.timeout_hcaptcha=3e4,this.turnstiles=[],this.turnstiles_default=[],this.turnstiles_conditions=[],this.timeout_turnstile=3e4,this.conditional=!1,this.conditional_data=!1,this.conditional_index_dragged_from=!1,this.conditional_icons_array=!1,this.conditional_highlight_array=!1,this.conditional_highlight_row_index=!1,this.conditional_row_array=!1,this.conditional_actions_run_action=[],this.conditional_actions_run_save=[],this.conditional_actions_run_submit=[],this.conditional_cache=!1,this.conditional_event_selector_to_condition=[],this.signatures=[],this.signatures_by_name=[],this.timeout_signature=3e4,this.google_maps=[],this.timeout_google_maps=3e4,this.analytics_google=!1,this.timeout_analytics_google=3e4,this.analytics_function=[],this.debug_height=0,this.debug_field_id_bypass=[],this.debug_timer,this.debug_log_array=[],this.debug_error_array=[],this.debug_timeout,this.text_editor_index=1,this.code_editor_index=1,this.keydown=[],this.timeout_interval=100,this.api_call_queue=[],this.api_call_queue_running=!1,this.number_to_word=["nought","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty"],this.label_old="",this.submit=!1,this.action_js=[],this.form_draft=!1,this.submit_auto_populate=!1,this.form_id_prefix="wsf-",this.field_name_prefix=ws_form_settings.field_prefix,this.meta_key_options_cache=[],this.options_action_objects=[],this.options_action_cache=[],this.sidebar_conditions=[],this.sidebar_expanded_obj=!1,this.touch_device="ontouchend"in document,this.hash="",this.token="",this.token_validated=!1,this.form_post_locked=!1,this.field_required_bypass=[],this.form_valid=!1,this.form_valid_old=null,this.form_validation_real_time_hooks=[],this.ecommerce_cart_price_type=[],this.has_ecommerce=!1,this.form_ecommerce_calculate_enabled=!0,this.progress=0,this.progress_percent="0%",this.progress_array=[],this.progress_class_complete="",this.progress_class_incomplete="",this.upload_obj=!1;var t=document.createElement("input");t.setAttribute("type","date"),this.native_date="date"==t.type,this.timeout_datetimepicker=5e3;var a=document.createElement("input");a.setAttribute("type","color"),this.native_color="color"==a.type,this.timeout_minicolors=5e3,this.form_action_custom=!1,this.form_ajax=!0,this.object_focus=!1,this.field_type_click_drag_check=!1,this.section_id_click_drag_check=!1,this.password_strength_status=0,this.cascade_cache=[],this.select_ajax_cache=[],this.preview_window=void 0,this.calc=[],this.file_frame=!1,this.file_frame_input_obj=!1,this.api_call_handle=[],this.visual_builder=!1,this.form_bypass_enabled=!1,this.action_js_process_validation_focus=!0,this.action_ga=!1,this.dropzonejs_processes=0,this.dropzonejs_index_dragged_from=0,this.conversational=!1},$.WS_Form.prototype.render=function(e){var t=this;void 0===e&&this.error("error_attributes"),void 0===e.obj&&this.error("error_attributes_obj"),void 0===e.form_id&&this.error("error_attributes_form_id"),this.form_canvas_obj=e.obj instanceof $?e.obj:$(e.obj),this.form_obj_id=this.form_canvas_obj.attr("id"),this.form_id=parseInt(e.form_id,10),0!==this.form_id&&(this.form_instance_id=parseInt(this.form_canvas_obj.attr("data-instance-id"),10),0!==this.form_instance_id&&(this.form_id_prefix=this.is_admin?"wsf-":"wsf-"+this.form_instance_id+"-",this.form_id_prefix_function=this.is_admin?"wsf_":"wsf_"+this.form_instance_id+"_",this.form_obj=this.form_canvas_obj.closest("form"),this.form_obj.length?this.form_obj.attr("novalidate",""):this.form_obj=this.form_canvas_obj,this.form_obj[0]!=this.form_canvas_obj[0]&&(this.form_obj.hasClass("wsf-form")||this.form_obj.addClass("wsf-form"),this.form_canvas_obj.hasClass("wsf-form")&&this.form_canvas_obj.removeClass("wsf-form")),this.get_configuration(function(){t.get_form(function(){t.init()})})))},$.WS_Form.configured=!1,$.WS_Form.css_rendered=!1,$.WS_Form.debug,$.WS_Form.debug_rendered=!1,$.WS_Form.analytics,$.WS_Form.tracking,$.WS_Form.ecommerce,$.WS_Form.calc,$.WS_Form.settings_plugin,$.WS_Form.settings_form=null,$.WS_Form.frameworks,$.WS_Form.parse_variables,$.WS_Form.parse_variable_help,$.WS_Form.parse_variable_repairable,$.WS_Form.actions,$.WS_Form.field_types,$.WS_Form.field_type_cache=[],$.WS_Form.file_types,$.WS_Form.meta_keys,$.WS_Form.meta_keys_required_setting=[],$.WS_Form.breakpoints,$.WS_Form.data_sources,$.WS_Form.templates_section,$.WS_Form.prototype.get_configuration=function(e,t,a){if(void 0===t&&(t=!1),void 0===a&&(a=!1),this.options_action_cache=[],a||this.loader_on(),!$.WS_Form.configured||t)if("undefined"==typeof wsf_form_json_config){var i=this;this.api_call("config","GET",!1,function(t){i.set_configuration(t.data),window.wsf_form_json_config=t.data,"function"==typeof e&&e()},!1,a)}else this.set_configuration(wsf_form_json_config),"function"==typeof e&&e();else"function"==typeof e&&e()},$.WS_Form.prototype.set_configuration=function(e){if($.WS_Form.settings_plugin=e.settings_plugin,$.WS_Form.settings_form=e.settings_form,$.WS_Form.frameworks=e.frameworks,$.WS_Form.field_types=e.field_types,$.WS_Form.file_types=e.file_types,$.WS_Form.meta_keys=e.meta_keys,$.WS_Form.parse_variables=e.parse_variables,$.WS_Form.parse_variables_repairable=e.parse_variables_repairable,$.WS_Form.parse_variable_help=e.parse_variable_help,$.WS_Form.actions=e.actions,$.WS_Form.data_sources=e.data_sources,$.WS_Form.templates_section=e.templates_section,$.WS_Form.calc=e.calc,$.WS_Form.tracking=e.tracking,$.WS_Form.ecommerce=e.ecommerce,this.is_admin||($.WS_Form.analytics=JSON.parse(atob(e.analytics))),void 0!==$.WS_Form.parse_variables){var t=[];for(var a in $.WS_Form.parse_variables)$.WS_Form.parse_variables.hasOwnProperty(a)&&t.push([a,$.WS_Form.parse_variables[a].priority]);t.sort(function(e,t){var a=void 0!==e[1]?e[1]:0;return(void 0!==t[1]?t[1]:0)-a});var i={};for(var a in t)if(t.hasOwnProperty(a)){var r=t[a][0];i[r]=$.WS_Form.parse_variables[r]}$.WS_Form.parse_variables=i}void 0!==e.debug&&($.WS_Form.debug=e.debug),this.field_type_cache_build(),$.WS_Form.configured=!0},$.WS_Form.prototype.get_form=function(e){if(0==this.form_id)return this.error("error_form_id"),void this.loader_off();if($("#"+this.form_obj_id).attr("data-id",this.form_id),"undefined"==typeof wsf_form_json||void 0===wsf_form_json[this.form_id]){var t=this;this.api_call("form/"+this.form_id+"/full","GET",!1,function(a){t.form=a.form,void 0===window.wsf_form_json&&(window.wsf_form_json=[]),window.wsf_form_json[t.form_id]=a.form,t.data_cache_build(),"function"==typeof e&&e(),t.loader_off()})}else this.form=wsf_form_json[this.form_id],this.data_cache_build(),"function"==typeof e&&e(),this.loader_off()},$.WS_Form.prototype.form_build=function(){this.timer_start=new Date;var e=this.get_form_html(this.form);if(this.form_canvas_obj.html(e),!this.is_admin){var t=this.get_object_meta_value(this.form,"class_form_wrapper","");if(""!=t){var a=this.form_canvas_obj.attr("class");a+=" "+t.trim(),this.form_canvas_obj.attr("class",a)}}this.form_render(),this.timer_duration=new Date-this.timer_start,$.WS_Form.debug_rendered&&this.debug_info("debug_info_duration",this.timer_duration+"ms")},$.WS_Form.prototype.get_framework=function(){var e=this.is_admin?"ws-form":$.WS_Form.settings_plugin.framework;return $.WS_Form.frameworks.types[e]},$.WS_Form.prototype.get_form_html=function(e){if(void 0===e)return"";if(void 0===e.groups)return"";var t=this.get_framework().form[this.is_admin?"admin":"public"],a=this.html_encode(e.label);if(!this.is_admin&&"on"==this.get_object_meta_value(e,"label_render","on"))var i=this.is_admin?"":this.get_object_meta_value(this.form,"label_mask_form",""),r=""!=i?i:void 0!==t.mask_label?t.mask_label:"",s={label:a},_=this.mask_parse(r,s);else _="";var o=this.get_tabs_html(e);o+=this.get_groups_html(e.groups);r=t.mask_single,s={form:o,id:this.form_id_prefix+"tabs",label:_};return this.comment_html("Form: "+a)+this.mask_parse(r,s)+this.comment_html("Form: "+a,!0)},$.WS_Form.prototype.get_tabs_html=function(e){if(void 0===e.groups)return"";var t=e.groups,a=Object.keys(t).length;if(1==a&&!this.is_admin)return"";var i="",r=this.get_framework().tabs[this.is_admin?"admin":"public"],s=this.get_object_meta_value(this.form,"cookie_tab_index")?this.cookie_get("tab_index",0):0;if(a>1||this.is_admin){for(var _ in t)if(t.hasOwnProperty(_)){var o=t[_];i+=this.get_tab_html(o,_,s==_)}var l="";if(!this.is_admin)this.get_object_meta_value(e,"tabs_hide",!1)&&(l+=' style="display:none"');var n=["wsf-group-tabs"];if(!this.is_admin){var c=this.get_object_meta_value(e,"class_tabs_wrapper",!1);""!=c&&n.push(c.trim())}var d=r.mask_wrapper,p={attributes:l,class:n.join(" "),tabs:i,id:this.form_id_prefix+"tabs"};return this.comment_html(this.language("comment_group_tabs"))+this.mask_parse(d,p)+this.comment_html(this.language("comment_group_tabs"),!0)}return""},$.WS_Form.prototype.get_tab_html=function(e,t,a){void 0===t&&(t=0),void 0===a&&(a=!1);var i=this.get_framework().tabs[this.is_admin?"admin":"public"],r=this.html_encode(e.label),s="";!this.is_admin&&"on"==this.get_object_meta_value(e,"hidden","")&&(s=' style="display:none" data-wsf-group-hidden');var _=i.mask_single,o={attributes:s,data_id:e.id,href:"#"+this.form_id_prefix+"group-"+e.id,label:r};return a&&void 0!==i.active?o.active=i.active:o.active="",this.mask_parse(_,o)},$.WS_Form.prototype.get_groups_html=function(e){if(void 0===e)return"";var t=Object.keys(e).length,a=this.get_framework().groups[this.is_admin?"admin":"public"],i=this.get_object_meta_value(this.form,"cookie_tab_index")?this.cookie_get("tab_index",0):0,r="",s=this.is_admin||t>1,_=0;for(var o in e)if(e.hasOwnProperty(o)){var l=e[o];r+=this.get_group_html(l,o==i,s,_++)}var n=s?a.mask_wrapper:"#groups",c={class:["wsf-groups"].join(" "),column_count:$.WS_Form.settings_plugin.framework_column_count,groups:r,id:this.form_id_prefix+"tabs"};return(s?this.comment_html(this.language("comment_groups")):"")+this.mask_parse(n,c)+(s?this.comment_html(this.language("comment_groups"),!0):"")},$.WS_Form.prototype.get_group_html=function(e,t,a,i){void 0===t&&(t=!1),void 0===a&&(a=!0);var r=this.get_framework().groups[this.is_admin?"admin":"public"],s=this.html_encode(e.id),_=this.html_encode(e.label);if(!this.is_admin&&"on"==this.get_object_meta_value(e,"label_render","on"))var o=this.is_admin?"":this.get_object_meta_value(this.form,"label_mask_group",""),l=""!=o?o:void 0!==r.mask_label?r.mask_label:"",n={label:_},c=this.mask_parse(l,n);else c="";var d,p=this.get_sections_html(e),u=[];(void 0!==r.class&&u.push(r.class),this.is_admin)||(""!=(d=this.get_object_meta_value(this.form,"class_group_wrapper",""))&&u.push(d.trim()),""!=(d=this.get_object_meta_value(e,"class_group_wrapper",""))&&u.push(d.trim()));t&&void 0!==r.class_active&&u.push(r.class_active);var h=[];this.is_admin||!this.is_admin&&"on"==this.get_object_meta_value(e,"hidden","")&&h.push("data-wsf-group-hidden");l=a?r.mask_single:"#group",n={attributes:(h.length>0?" ":"")+h.join(" "),class:u.join(" "),column_count:$.WS_Form.settings_plugin.framework_column_count,data_id:e.id,data_group_index:i,group:p,id:this.form_id_prefix+"group-"+s,label:c};return(a?this.comment_html(this.language("comment_group")+": "+_):"")+this.mask_parse(l,n)+(a?this.comment_html(this.language("comment_group")+": "+_,!0):"")},$.WS_Form.prototype.get_sections_html=function(e){var t="",a=this.get_framework().sections[this.is_admin?"admin":"public"],i=(e.id,e.sections),r={};if("object"==typeof this.submit?void 0!==this.submit.section_repeatable&&(r=this.submit.section_repeatable):!1!==this.submit_auto_populate&&void 0!==this.submit_auto_populate.section_repeatable&&(r=this.submit_auto_populate.section_repeatable),void 0===i)return"";for(var s in i)if(i.hasOwnProperty(s)){var _=i[s],o="section_"+_.id,l=!1!==r&&void 0!==r[o]&&void 0!==r[o].index?r[o].index:[!1];for(var n in l)if(l.hasOwnProperty(n)){var c=l[n];t+=this.get_section_html(_,c)}}var d=a.mask_wrapper,p={class:"wsf-sections",column_count:$.WS_Form.settings_plugin.framework_column_count,data_id:e.id,sections:t,id:this.form_id_prefix+"sections-"+e.id};return this.comment_html(this.language("comment_sections"))+this.mask_parse(d,p)+this.comment_html(this.language("comment_sections"),!0)},$.WS_Form.prototype.get_section_html=function(e,t){void 0===t&&(t=!1);var a=!1;if(!this.is_admin&&((a="on"==this.get_object_meta_value(e,"section_repeatable",""))&&!1===t)){t=0;do{t++}while($("#"+this.form_id_prefix+"section-"+e.id+"-repeat-"+t).length)}var i=[],r=this.get_framework().sections[this.is_admin?"admin":"public"],s=this.column_class_array(e);if(a&&!this.is_admin&&(i.push("data-repeatable"),i.push('data-repeatable-index="'+t+'"')),void 0!==r.class_single&&(s=s.concat(r.class_single)),!this.is_admin){var _;""!=(_=this.get_object_meta_value(this.form,"class_section_wrapper",""))&&s.push(_.trim()),""!=(_=this.get_object_meta_value(e,"class_section_wrapper",""))&&s.push(_.trim());var o=this.get_object_meta_value(e,"class_single_vertical_align","");if(o){var l=this.get_field_value_fallback(!1,!1,"class_single_vertical_align");void 0!==l[o]&&s.push(l[o])}if(""!=this.get_object_meta_value(e,"validate_inline","")){var n=void 0!==this.framework.fields.public.class_form_validated?this.framework.fields.public.class_form_validated:[];this.is_iterable(n)?s.push(...n):s.push(n)}var c=this.get_object_meta_value(this.form,"conversational",!1),d=this.get_object_meta_value(e,"conversational_full_height_section",!1);c&&d&&s.push("wsf-form-conversational-section-full-height")}var p=this.html_encode(e.label);if(this.is_admin||"on"==this.get_object_meta_value(e,"label_render","on"))var u=this.is_admin?"":this.get_object_meta_value(this.form,"label_mask_section",""),h=""!=u?u:void 0!==r.mask_label?r.mask_label:"",f={label:p},m=this.mask_parse(h,f);else m="";this.is_admin||("on"==this.get_object_meta_value(e,"disabled_section","")&&i.push('disabled aria-disabled="true"'),"on"==this.get_object_meta_value(e,"hidden_section","")&&i.push('style="display:none;" aria-live="polite" aria-hidden="true"'));var v=this.get_fields_html(e,t);h=r.mask_single,f={attributes:(i.length>0?" ":"")+i.join(" "),class:s.join(" "),column_count:$.WS_Form.settings_plugin.framework_column_count,data_id:e.id,id:this.form_id_prefix+"section-"+e.id+(t?"-repeat-"+t:""),label:m,section:v,section_id:$.WS_Form.settings_plugin.helper_section_id?'<span class="wsf-section-id">'+this.language("id")+": "+e.id+"</span>":""};return this.comment_html(this.language("comment_section")+": "+p)+this.mask_parse(h,f)+this.comment_html(this.language("comment_section")+": "+p,!0)},$.WS_Form.prototype.get_fields_html=function(e,t){var a="on"==this.get_object_meta_value(e,"section_repeatable","");void 0===t&&(t=!!a&&0);var i="",r=this.get_framework().fields[this.is_admin?"admin":"public"],s=(e.id,e.fields),_=this.html_encode(e.label);if(!this.is_admin&&"on"==this.get_object_meta_value(e,"label_render","on"))var o=this.is_admin?"":this.get_object_meta_value(this.form,"label_mask_section",""),l=""!=o?o:void 0!==r.mask_wrapper_label?r.mask_wrapper_label:"",n={label:_},c=this.mask_parse(l,n);else c="";if(void 0===s)return"";for(var d in s)if(s.hasOwnProperty(d)){var p=s[d];i+=this.get_field_html(p,t)}l=r.mask_wrapper,n={column_count:$.WS_Form.settings_plugin.framework_column_count,data_id:e.id,fields:i,id:this.form_id_prefix+"fields-"+e.id,label:c};return this.comment_html(this.language("comment_fields"))+this.mask_parse(l,n)+this.comment_html(this.language("comment_fields"),!0)},$.WS_Form.prototype.value_populate_process=function(e,t){if(null===e)return"";switch(t.type){case"datetime":return"function"==typeof this.get_date_by_type?this.get_date_by_type(e,t):"";case"select":case"checkbox":case"radio":case"price_select":case"price_checkbox":case"price_radio":return"object"==typeof e?e.map(function(e){return e.toString()}):e;default:return this.html_encode(e)}},$.WS_Form.prototype.get_field_html=function(e,t){void 0===t&&(t=!1);var a=[];!1!==t&&a.push('data-repeatable-index="'+t+'"');var i=this.get_framework().fields[this.is_admin?"admin":"public"];this.is_admin||"on"==this.get_object_meta_value(e,"hidden","")&&a.push('style="display:none;" aria-live="polite" aria-hidden="true"');var r=this.column_class_array(e),s=this.get_object_meta_value(e,"sub_type",!1);""==s&&(s=!1);var _=this.get_field_value_fallback(e.type,!1,"class_single",!1,i,s);if(!1!==_&&(r=r.concat(_)),!this.is_admin){var o;""!=(o=this.get_object_meta_value(this.form,"class_field_wrapper",""))&&r.push(o.trim()),""!=(o=this.get_object_meta_value(e,"class_field_wrapper",""))&&r.push(o.trim());var l=this.get_object_meta_value(e,"class_single_vertical_align","");if(l){var n=this.get_field_value_fallback(e.type,!1,"class_single_vertical_align",!1,i,s);void 0!==n[l]&&r.push(n[l])}if(""!=this.get_object_meta_value(e,"validate_inline","")){var c=void 0!==this.framework.fields.public.class_form_validated?this.framework.fields.public.class_form_validated:[];this.is_iterable(c)?r.push(...c):r.push(c)}}var d=!1!==t?"_"+t:"",p=ws_form_settings.field_prefix+e.id+d;if("object"==typeof this.submit){if(void 0!==this.submit.meta&&void 0!==this.submit.meta[p]&&void 0!==this.submit.meta[p].value&&null!==this.submit.meta[p].value){var u=this.submit.meta[p].value;u=this.value_populate_process(u,e)}}else if(!1!==this.submit_auto_populate&&void 0!==this.submit_auto_populate.data&&void 0!==this.submit_auto_populate.data[p]&&null!==this.submit_auto_populate.data[p]){u=this.submit_auto_populate.data[p];u=this.value_populate_process(u,e)}var h=this.is_admin?"":this.get_field_html_single(e,u,!1,t),f=this.html_encode(e.label);if(void 0===$.WS_Form.field_type_cache[e.type])return"";var m=$.WS_Form.field_type_cache[e.type];if(void 0!==m.pro_required&&m.pro_required)return"";var v=!this.is_admin&&(void 0!==m.mask_wrappers_drop&&m.mask_wrappers_drop);if("recaptcha"!=e.type||this.is_admin||"invisible"!=this.get_object_meta_value(e,"recaptcha_recaptcha_type","default")||(v=!0),"hcaptcha"!=e.type||this.is_admin||"invisible"!=this.get_object_meta_value(e,"hcaptcha_type","default")||(v=!0),v)var b="#field";else b=this.get_field_value_fallback(e.type,!1,"mask_single",!1,i,s);switch(e.type){case"checkbox":case"price_checkbox":var g=this.get_object_meta_value(e,"checkbox_min",!1),y=this.get_object_meta_value(e,"checkbox_max",!1),k=this.get_object_meta_value(e,"select_all",!1);if(!1===g&&!1===y)break;!1!==g&&(g=parseInt(g,10))>0&&a.push('data-checkbox-min="'+g+'"'),!1===y||k||(y=parseInt(y,10))>=0&&a.push('data-checkbox-max="'+y+'"');break;case"select":case"price_select":var w=this.get_object_meta_value(e,"select_min",!1),x=this.get_object_meta_value(e,"select_max",!1);if(!1===w&&!1===x)break;!1!==w&&(w=parseInt(w,10))>0&&a.push('data-select-min="'+w+'"'),!1!==x&&(x=parseInt(x,10))>=0&&a.push('data-select-max="'+x+'"')}var j={attributes:(a.length>0?" ":"")+a.join(" "),class:r.join(" "),data_id:e.id,field:h,id:this.get_part_id(e.id,t,"field-wrapper"),type:e.type};return this.comment_html(this.language("comment_field")+": "+f)+this.mask_parse(b,j)+this.comment_html(this.language("comment_field")+": "+f,!0)},$.WS_Form.prototype.field_type_cache_build=function(){if(this.is_admin||($.WS_Form.field_type_cache=$.WS_Form.field_types),$.WS_Form.field_type_cache.length>0)return!0;for(var e in $.WS_Form.field_types){var t=$.WS_Form.field_types[e].types;for(var a in t)$.WS_Form.field_type_cache[a]=t[a]}},$.WS_Form.prototype.attr_encode=function(e,t){return t=t?"&#13;":"\n",(""+e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,t).replace(/[\r\n]/g,t)},$.WS_Form.prototype.html_encode=function(e){switch(typeof e){case"string":e=this.html_encode_do(e);break;case"object":for(var t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=this.html_encode_do(e[t]))}return e},$.WS_Form.prototype.html_encode_do=function(e){var t=this.replace_all(e,"&","&#38;");return t=this.replace_all(t,"<","&lt;"),t=this.replace_all(t,">","&gt;"),t=this.replace_all(t,'"',"&quot;")},$.WS_Form.prototype.html_strip=function(e){switch(typeof e){case"string":e=this.html_strip_do(e);break;case"object":for(var t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=this.html_strip_do(e[t]))}return e},$.WS_Form.prototype.html_strip_do=function(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent},$.WS_Form.prototype.js_string_encode=function(e){return"string"!=typeof e?e:this.replace_all(e,"'","\\'")},$.WS_Form.prototype.loader_on=function(){$("#wsf-loader").addClass("wsf-loader-on")},$.WS_Form.prototype.loader_off=function(){$("#wsf-loader").removeClass("wsf-loader-on")},$.WS_Form.prototype.comment_html=function(e,t){return void 0===t&&(t=!1),$.WS_Form.settings_plugin.comments_html?"\x3c!-- "+(t?"/":"")+e+" --\x3e\n"+(t?"\n":""):""},$.WS_Form.prototype.comment_css=function(e){return $.WS_Form.settings_plugin.comments_css?"\t/* "+e+" */\n":""},$.WS_Form.prototype.get_object_value=function(e,t,a){return void 0===a&&(a=!1),void 0===e?a:void 0===e[t]?a:e[t]},$.WS_Form.prototype.get_field_value_fallback=function(e,t,a,i,r,s){if(void 0===i&&(i=!1),r||(r=this.framework_fields),void 0===s&&(s=!1),!1===s)return this.get_field_value_fallback_process(e,t,a,i,r);if((_=this.get_field_value_fallback_process(e,t,a+"_"+s,i,r))===i)var _=this.get_field_value_fallback_process(e,t,a,i,r);return _},$.WS_Form.prototype.get_field_value_fallback_process=function(e,t,a,i,r){var s=r,_=$.WS_Form.field_type_cache[e];if(!1!==t){if(!(void 0===s||void 0===s[t]||void 0===s[t].field_types||void 0===s[t].field_types[e]||void 0===s[t].field_types[e][a]))return s[t].field_types[e][a];if(!(void 0===s||void 0===s[t]||void 0===s[t][a]))return s[t][a]}return void 0===s||void 0===s.field_types||void 0===s.field_types[e]||void 0===s.field_types[e][a]?void 0===s||void 0===s[a]?void 0===_?i:void 0===_[a]?i:_[a]:s[a]:s.field_types[e][a]},$.WS_Form.prototype.get_object_data=function(e,t,a){switch(void 0===a&&(a=!1),e){case"form":return a?this.object_data_scratch:this.form;case"group":return a?this.object_data_scratch:this.group_data_cache[t];case"section":return a?this.object_data_scratch:this.section_data_cache[t];case"field":return a?this.object_data_scratch:this.field_data_cache[t];case"conditional":return this.conditional;case"action":return this.action}return!1},$.WS_Form.prototype.get_object_meta=function(e,t){switch(e){case"form":var a=$.WS_Form.settings_form.sidebars.form.meta;break;case"group":a=$.WS_Form.settings_form.sidebars.group.meta;break;case"section":a=$.WS_Form.settings_form.sidebars.section.meta;break;case"field":var i=this.field_data_cache[t];a=$.WS_Form.field_type_cache[i.type]}return a},$.WS_Form.prototype.get_object_meta_value=function(e,t,a,i,r){if(void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===e)return a;if(void 0===e.meta)return a;if(void 0===e.meta[t]){if(!i)return a;this.set_object_meta_value(e,t,a)}return r&&"string"==typeof e.meta[t]?this.parse_variables_process(e.meta[t]).output:e.meta[t]},$.WS_Form.prototype.has_object_meta_key=function(e,t){return void 0!==e&&void 0!==e.meta&&void 0!==e.meta[t]&&""!=e.meta[t]},$.WS_Form.prototype.parse_variables_process=function(e,t,a,i,r,s,_,o){if("string"!=typeof e)return this.parse_variables_process_error(e);if(-1==e.indexOf("#"))return this.parse_variables_process_error(e);void 0===t&&(t=!1),void 0===a&&(a=!1);var l="calc"===a;void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===s&&(s=!0),void 0===_&&(_=!1),void 0===o&&(o=1);var n={},c={},d=[];if(o>100)return this.error("error_parse_variable_syntax_error_depth","","error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_depth"));for(var p in $.WS_Form.parse_variables)if($.WS_Form.parse_variables.hasOwnProperty(p)){var u=$.WS_Form.parse_variables[p];if((u.ignore_prefix,u.ignore_prefix)||-1!==e.indexOf("#"+p))for(var h in u.variables)if(u.variables.hasOwnProperty(h)&&-1!==e.indexOf("#"+h)){var f=u.variables[h],m=void 0!==f.value&&f.value,v="object"==typeof f.attributes&&f.attributes,b=void 0!==f.single_parse&&f.single_parse;if(!1!==v||!1===m){if(("object"==typeof f.attributes?f.attributes.length:0)>0){var g=0;do{var y=e.indexOf("#"+h,g);if(-1!==y){var k=-1,w=-1,x=e.substring(y+h.length+1);if("("===x.substring(0,1)&&(k=y+h.length+1,-1!==(w=this.get_bracket_finish_index(x))&&(w+=k)),-1===k||-1===w){g+=h.length+1,F="#"+h;var j=[]}else{g=w;var S=e.substr(k+1,w-1-k),F=e.substr(y,w+1-y),W=void 0!==f.attribute_separator?f.attribute_separator:",";j=this.string_to_attributes(S,W)}for(var O in v)if(v.hasOwnProperty(O)){var M=v[O],P=M.id,I=void 0!==j[O];if((void 0===M.required||M.required)&&!I)return this.error("error_parse_variable_syntax_error_attribute","#"+h+" (Expected "+P+")","error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_attribute","#"+h+" (Expected "+P+")"));var z=void 0!==M.default&&M.default;if(!1===z||I||(j[O]=z),void 0===M.trim||M.trim){var D=j[O];"string"==typeof D&&(j[O]=D.trim())}var N=void 0!==M.valid&&M.valid;if(!1!==N&&!N.includes(j[O]))return this.error("error_parse_variable_syntax_error_attribute_invalid","#"+h+" (Expected "+N.join(", ")+")","error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_attribute_invalid","#"+h+" (Expected "+N.join(", ")+")"))}var T="",q=!0;switch(h){case"calc":case"text":switch(q=!1,a=h){case"calc":var C=(et=this.parse_variables_process(j[0],t,"calc",i,r,s,_,o+1)).output;"object"==typeof et.fields&&(d=d.concat(et.fields)),T=this.eval_process(C);break;case"text":C=(et=this.parse_variables_process(j[0],t,"text",i,r,s,_,o+1)).output;"object"==typeof et.fields&&(d=d.concat(et.fields)),T=C}if(void 0===$.WS_Form.field_type_cache[i.type])break;var Y=$.WS_Form.field_type_cache[i.type],A=void 0!==Y[a+"_in"]&&Y[a+"_in"];if(!1!==i&&void 0!==i&&1==o&&!l&&s&&A){var U=et.fields,J=[],E=[];for(var H in U)if(U.hasOwnProperty(H)){var L=U[H];-1===E.indexOf(L)&&(E.push(L),J.push(L))}var G=!1;for(var Z in this.calc)if(this.calc.hasOwnProperty(Z)){var B=this.calc[Z];B.field===i&&B.field_part===r&&B.type===a&&B.value===e&&B.section_repeatable_index===t&&(this.calc[Z].field_ids_touched=this.calc[Z].field_ids_touched.concat(J),this.calc[Z].field_ids_touched=this.calc[Z].field_ids_touched.filter(function(e,t,a){return a.indexOf(e)===t}),G=!0)}G||(this.calc.push({field:i,field_part:r,type:a,value:e,field_ids_touched:J,section_repeatable_index:t}),this.calc.sort(function(e,t){var a=["field_placeholder","field_min","field_max","field_ecommerce_price_min","field_ecommerce_price_max"],i=a.indexOf(e.field_part),r=a.indexOf(t.field_part);return i===r?0:i<r?1:-1}),this.calc.sort(function(e,t){return e.section_repeatable_index===t.section_repeatable_index?0:e.section_repeatable_index<t.section_repeatable_index?1:-1}),ws_form_settings.debug&&"field_value"===r&&this.debug_field_id_bypass.push(i.id)),ws_form_settings.debug&&this.log("log_"+a+"_registered",i.label+" - "+this.html_encode(e)+(J.length?" ("+this.language("log_"+a+"_registered_triggered",J.join(", "))+")":""),a)}break;case"section_rows_start":if(isNaN(j[0]))break;var R=this.closing_string_index(e,"#section_rows_end","#section_rows_start",w);if((_=parseInt(j[0],10))<=0)break;var Q=e.substring(w+1,w+1+(R-(w+1))),K="section_"+_.toString(),V=!1!==this.section_repeatable_indexes&&void 0!==this.section_repeatable_indexes[K]&&this.section_repeatable_indexes[K],X="";if(!1===V)continue;for(var ee in V)if(V.hasOwnProperty(ee)){var te=V[ee];X+=(et=this.parse_variables_process(Q,te,!1,i,r,!1,_,o)).output}e=e.substring(0,y)+X+e.substring(R+17),g=0;break;case"if":var ae=this.closing_string_index(e,"#endif","#if",w);if(-1===ae)return this.error("error_parse_variable_syntax_error_endif",S,"parse_variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_endif",S));var ie=["==","!=",">",">=","<=","<","^=","$=","!^=","!$=","*=","!*="],re=["&&","||"],se=[],_e=0,oe=0;for(var le in j)if(j.hasOwnProperty(le)){var ne=j[le];if(0===oe&&(se[_e]={value_a:"",operator:"!=",value_b:""}),1!=oe&&3!=oe||(ne=this.replace_all(ne,"&amp;","&"),ne=this.replace_all(ne,"&lt;","<"),ne=this.replace_all(ne,"&gt;",">")),0==oe||2==oe)"string"!=typeof(ne=S=(et=this.parse_variables_process(ne,t,!1,i,r,s,_,o+1)).output)||""===ne||isNaN(ne)||(ne=parseFloat(ne));1==oe&&-1!==re.indexOf(ne)&&(oe=3);var ce=!1;switch(oe){case 0:case 2:ce=0==oe?"value_a":"value_b",se[_e][ce]=ne,se[_e][ce+"_string"]=S;break;case 1:if(-1===ie.indexOf(ne))return this.error("error_parse_variable_syntax_error_operator",S,"parse_variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_operator",S));se[_e].operator=ne;break;case 3:if(-1===re.indexOf(ne))return this.error("error_parse_variable_syntax_error_logic",S,"parse_variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_logic",S));se[_e].logic_next=ne}++oe>3&&(oe=0,_e++)}var de=!1,pe="&&";for(var _e in se)if(se.hasOwnProperty(_e)){var ue=se[_e],he=!1;switch(ue.operator){case"==":he=ue.value_a==ue.value_b;break;case"!=":he=ue.value_a!=ue.value_b;break;case"<":he=ue.value_a<ue.value_b;break;case">":he=ue.value_a>ue.value_b;break;case"<=":he=ue.value_a<=ue.value_b;break;case">=":he=ue.value_a>=ue.value_b;break;case"*=":he=""!==ue.value_b_string&&-1!==ue.value_a_string.indexOf(ue.value_b_string);break;case"!*=":he=""!==ue.value_b_string&&-1===ue.value_a_string.indexOf(ue.value_b_string);break;case"^=":he=""!==ue.value_b_string&&0===ue.value_a_string.indexOf(ue.value_b_string);break;case"!^=":he=""!==ue.value_b_string&&ue.value_a_string.indexOf(ue.value_b_string)>0;break;case"$=":he=""!==ue.value_b_string&&ue.value_a_string.indexOf(ue.value_b_string)===ue.value_a_string.length-ue.value_b_string.length;break;case"!$=":he=""!==ue.value_b_string&&ue.value_a_string.indexOf(ue.value_b_string)!==ue.value_a_string.length-ue.value_b_string.length}de=0==_e?he:"&&"==pe?de&&he:de||he,pe=void 0!==ue.logic_next?ue.logic_next:"&&"}T=!1,e=de?(e=e.substring(0,ae)+e.substring(ae+6)).substring(0,y)+e.substring(w+1):e.substring(0,y)+e.substring(ae+6),g=0;break;case"tab_label":if(isNaN(j[0]))return this.error("error_parse_variable_syntax_error_group_id",j[0],"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_group_id",j[0]));var fe=parseInt(j[0],10);if(void 0===this.group_data_cache[fe]||void 0===this.group_data_cache[fe].label)return this.error("error_parse_variable_syntax_error_group_id",fe,"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_group_id",fe));T=this.group_data_cache[fe].label;break;case"section_label":if(isNaN(j[0]))return this.error("error_parse_variable_syntax_error_section_id",j[0],"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_section_id",j[0]));var me=parseInt(j[0],10);if(void 0===this.section_data_cache[me]||void 0===this.section_data_cache[me].label)return this.error("error_parse_variable_syntax_error_section_id",me,"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_section_id",me));T=this.section_data_cache[me].label;break;case"cookie_get":T=this.cookie_get_raw(j[0]);break;case"field_label":if(isNaN(j[0]))return this.error("error_parse_variable_syntax_error_field_id",j[0],"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",j[0]));var ve=parseInt(j[0],10);if(void 0===this.field_data_cache[ve]||void 0===this.field_data_cache[ve].label)return this.error("error_parse_variable_syntax_error_field_id",ve,"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",ve));T=this.field_data_cache[ve].label;break;case"field":case"field_float":case"field_date_offset":case"ecommerce_field_price":if(isNaN(j[0]))return this.error("error_parse_variable_syntax_error_field_id",j[0],"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",j[0]));ve=parseInt(j[0],10);if(("field_value"===r||!1===r)&&ve===parseInt(i.id,10))return this.error("error_parse_variable_syntax_error_self_ref",F,"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_self_ref",F));if(void 0===this.field_data_cache[ve])return this.error("error_parse_variable_syntax_error_field_id",ve,"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",ve));o<=2&&d.push(ve);var be=this.field_data_cache[ve];if(void 0===$.WS_Form.field_type_cache[be.type])break;var ge=$.WS_Form.field_type_cache[be.type];if(!1!==a)if(!(ge[a+"_out"],ge[a+"_out"]))return this.error("error_parse_variable_syntax_error_"+a+"_out",be.label+" (ID: "+be.id+")","error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_"+a+"_out",be.label+" (ID: "+be.id+")"));var ye=(ge.static,ge.static);if(ye){if(!0===ye)var ke=void 0!==ge.mask_field_static?ge.mask_field_static:"";else{ke=this.get_object_meta_value(be,ye,"");this.field_wpautop(be,ge)&&(ke=this.wpautop(ke),q=!1)}"object"==typeof(et=this.parse_variables_process(ke,t,a,be,r,s,_,o+1)).fields&&(d=d.concat(et.fields)),T=[et.output];break}var we=void 0!==ge.submit_array&&ge.submit_array,xe=void 0!==be.section_repeatable_section_id&&parseInt(be.section_repeatable_section_id,10),$e=void 0!==i.section_repeatable_section_id&&parseInt(i.section_repeatable_section_id,10),je=t,Se=(T=!1,void 0!==j[1]?j[1]:","),Fe=void 0!==j[2]&&j[2];if(!1!==je&&xe===_||!1!==xe&&!1!==$e)T=this.get_field_value(be,je,we,Fe);if(!1===T&&!1!==xe&&!1===$e)T=this.get_field_value(be,!0,we,Fe);if(!1===T&&!1===xe)T=this.get_field_value(be,!1,we,Fe);if(!1===T)switch(be.type){case"price_select":case"price_checkbox":case"price_radio":case"select":case"checkbox":case"radio":var We=this.get_data_source(be);T=!1!==We.default_value?We.default_value:[];break;default:var Oe=this.get_object_meta_value(be,"default_value","");"object"==typeof(et=this.parse_variables_process(Oe,t,a,be,r,s,_,o+1)).fields&&(d=d.concat(et.fields)),T=[et.output]}if("field"==h&&!1!==Fe&&(T=this.get_data_grid_column(T,be,Fe)),l)if(T.length)switch(be.type){case"price_select":case"price_checkbox":case"price_radio":case"price":case"price_subtotal":case"cart_price":case"cart_total":var Me=0;for(var Pe in T)T.hasOwnProperty(Pe)&&(Me+=this.get_number(T[Pe],0,!0));var Ie=parseInt($.WS_Form.settings_plugin.price_decimals,10);T=this.get_number(Me,0,!1,Ie);break;case"datetime":if(""===T[0]){T="";break}var ze=this.get_object_meta_value(be,"input_type_datetime","date");(qe=this.get_object_meta_value(be,"format_date",ws_form_settings.date_format))||(qe=ws_form_settings.date_format);var De=this.get_date(T[0],ze,qe);T=this.get_number(De.getTime())/1e3;break;default:Me=0;for(var Pe in T)T.hasOwnProperty(Pe)&&(Me+=this.get_number(T[Pe],0,!1));T=Me}else T=0;else T=T.join(Se);switch(h){case"ecommerce_field_price":T=this.get_price(this.get_number(T));break;case"field_date_offset":if("datetime"!==be.type)return this.error("error_parse_variable_syntax_error_field_date_offset",ve,"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_date_offset",ve));var Ne=this.parse_variables_process(T,t,a,be,r,s,_,o).output,Te=this.get_object_meta_value(be,"format_date",ws_form_settings.date_format);if(Te||(Te=ws_form_settings.date_format),"calc"===a)He=new Date(1e3*parseInt(Ne,10));else{ze=this.get_object_meta_value(be,"input_type_datetime","date");He=this.get_date(Ne,ze,Te)}if(!1!==He&&!isNaN(He.getTime())){if((Le=parseInt(this.parse_variables_process(j[1],t,a,i,r,s,_,o).output,10))&&He.setSeconds(He.getSeconds()+Le),void 0!==j[2]&&""!=j[2])var qe=j[2];else qe=Te;qe||(qe=ws_form_settings.date_format),T="function"==typeof this.date_format?this.date_format(He,qe):""}break;case"field_float":T=this.get_number(T)}"field"===h&&this.field_wpautop(be,ge)&&(T=this.wpautop(T),q=!1);break;case"ecommerce_price":"object"==typeof(et=this.parse_variables_process(j[0],t,a,i,r,s,_,o)).fields&&(d=d.concat(et.fields));var Ce=this.eval_process(et.output);T=this.get_price(Ce);break;case"select_option_text":if(isNaN(j[0]))return this.error("error_parse_variable_syntax_error_field_id",j[0],"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",j[0]));ve=parseInt(j[0],10);void 0===(Se=j[1])&&(Se=", "),o<=2&&d.push(ve);var Ye=ws_form_settings.field_prefix+ve.toString()+(t?"["+t+"]":"");if((Ee=$('[name="'+Ye+'[]"] option:selected',this.form_canvas_obj)).length)T=$.map(Ee,function(e,t){return $(e).text()}).join(Se);break;case"query_var":T=this.get_query_var(j[0]);break;case"section_row_count":if(isNaN(j[0]))return this.error("error_parse_variable_syntax_error_section_id",j[0],"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_section_id",j[0]));var Ae=j[0];if(void 0===this.section_data_cache[Ae])return this.error("error_parse_variable_syntax_error_section_id",Ae,"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_section_id",Ae));var Ue=$('[data-repeatable][data-id="'+Ae+'"]',this.form_canvas_obj);if(0===(T=Ue.length?Ue.length:0)&&"function"==typeof this.get_section_repeat_default){var Je=this.section_data_cache[Ae];T=this.get_section_repeat_default(Je)}break;case"checkbox_label":case"radio_label":if(isNaN(j[0]))return this.error("error_parse_variable_syntax_error_field_id",j[0],"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",j[0]));ve=parseInt(j[0],10);void 0===(Se=j[1])&&(Se=", "),o<=2&&d.push(ve);Ye=ws_form_settings.field_prefix+ve.toString()+(t?"["+t+"]":"");if((Ee=$('[name="'+Ye+'[]"]:checked',this.form_canvas_obj)).length)T=$.map(Ee,function(e,t){return $('label[for="'+$(e).attr("id")+'"]').text()}).join(Se);break;case"checkbox_count":case"select_count":if(isNaN(j[0]))return this.error("error_parse_variable_syntax_error_field_id",j[0],"error-parse-variables"),this.parse_variables_process_error(this.language("error_parse_variable_syntax_error_field_id",j[0]));ve=parseInt(j[0],10);o<=2&&d.push(ve);Ye=ws_form_settings.field_prefix+ve.toString()+(t?"["+t+"]":"");switch(h){case"checkbox_count":var Ee=$('[name="'+Ye+'[]"]:checked',this.form_canvas_obj);break;case"select_count":Ee=$('select[name="'+Ye+'[]"] :selected',this.form_canvas_obj)}T=Ee?Ee.length:0;break;case"post_date_custom":case"server_date_custom":case"blog_date_custom":var He=new Date(m);if(void 0!==j[1])(Le=parseInt(this.parse_variables_process(j[1],t,a,i,r,s,_,o).output,10))&&He.setSeconds(He.getSeconds()+Le);T="function"==typeof this.date_format?this.date_format(He,j[0]):"";break;case"client_date_custom":var Le;He=new Date;if(void 0!==j[1])(Le=parseInt(this.parse_variables_process(j[1],t,a,i,r,s,_,o).output,10))&&He.setSeconds(He.getSeconds()+Le);T="function"==typeof this.date_format?this.date_format(He,j[0]):"";break;case"random_number":var Ge=parseInt(this.get_number(j[0]),10),Ze=parseInt(this.get_number(j[1]),10);T=Math.floor(Math.random()*(Ze-Ge+1))+Ge;break;case"random_string":var Be=parseInt(this.get_number(j[0]),10),Re=j[1],Qe=Re.length;T="";for(var Ke=0;Ke<Be;Ke++)T+=Re[Math.floor(Math.random()*Qe)];break;case"abs":case"ceil":case"cos":case"exp":case"floor":case"log":case"negative":case"positive":case"sin":case"sqrt":case"tan":"object"==typeof(et=this.parse_variables_process(j[0],t,a,i,r,s,_,o)).fields&&(d=d.concat(et.fields));Ce=this.eval_process(et.output);switch(h){case"abs":T=Math.abs(Ce);break;case"ceil":T=Math.ceil(Ce);break;case"cos":T=Math.cos(Ce);break;case"exp":T=Math.exp(Ce);break;case"floor":T=Math.floor(Ce);break;case"log":T=Math.log(Ce);break;case"negative":case"positive":T="positive"==h?Math.max(0,Ce):Math.min(0,Ce);break;case"sin":T=Math.sin(Ce);break;case"sqrt":T=Math.sqrt(Ce);break;case"tan":T=Math.tan(Ce)}break;case"lower":case"upper":case"ucwords":case"ucfirst":case"capitalize":case"sentence":case"wpautop":case"trim":if("string"==typeof j[0])switch("object"==typeof(et=this.parse_variables_process(j[0],t,a,i,r,s,_,o)).fields&&(d=d.concat(et.fields)),T=et.output,h){case"lower":T=T.toLowerCase();break;case"upper":T=T.toUpperCase();break;case"ucwords":T=this.ucwords(T);break;case"ucfirst":T=this.ucfirst(T);break;case"capitalize":T=this.capitalize(T);break;case"sentence":T=this.sentence(T);break;case"wpautop":T=this.wpautop(T),q=!1;break;case"trim":T=T.trim(),q=!1}break;case"pow":"object"==typeof(et=this.parse_variables_process(j[0],t,a,i,r,s,_,o)).fields&&(d=d.concat(et.fields));var Ve=this.eval_process(et.output,tt);"object"==typeof(et=this.parse_variables_process(j[1],t,a,i,r,s,_,o)).fields&&(d=d.concat(et.fields));var Xe=this.eval_process(et.output,tt);T=Math.pow(Ve,Xe);break;case"round":var et=this.parse_variables_process(j[1],t,a,i,r,s,_,o),tt=this.get_number(et.output);"object"==typeof(et=this.parse_variables_process(j[0],t,a,i,r,s,_,o)).fields&&(d=d.concat(et.fields)),T=this.eval_process(et.output,tt);break;case"min":case"max":var at=[];for(var it in j)if(j.hasOwnProperty(it)){"object"==typeof(et=this.parse_variables_process(j[it],t,a,i,r,s,_,o)).fields&&(d=d.concat(et.fields));Ce=this.eval_process(et.output);at.push(Ce)}T=at.length>0?"min"==h?Math.min(...at):Math.max(...at):0;break;case"avg":Me=0;if(1===j.length)"object"==typeof(et=this.parse_variables_process(j[0],t,a,i,r,s,_,o)).fields&&(d=d.concat(et.fields)),j=this.string_to_attributes(et.output);for(var it in j){if(j.hasOwnProperty(it))"object"==typeof(et=this.parse_variables_process(j[it],t,a,i,r,s,_,o)).fields&&(d=d.concat(et.fields)),Me+=Ce=this.eval_process(et.output)}T=Me/j.length}!1!==T&&(q&&(T=this.html_encode(T)),b?c[F.substring(1)]=T:n[F.substring(1)]=T)}}while(-1!==y);e=this.mask_parse(e,n)}}else n[h]=m}}if(-1!=e.indexOf("form")&&(n.form_id=this.form_id,n.form_instance_id=this.form_instance_id,n.form_obj_id=this.form_obj_id,n.form_label=this.form.label,n.form_checksum=this.form.published_checksum,n.form_framework=this.framework.name),-1!=e.indexOf("section")){n.section_row_index=t;var rt=1;!1===_&&!1!==i&&void 0!==i.section_id&&parseInt(i.section_id,10)>0&&(_=parseInt(i.section_id,10)),"object"==typeof this.section_repeatable_indexes["section_"+_]&&(rt=this.section_repeatable_indexes["section_"+_].indexOf(t.toString())+1)<=0&&(rt=1),n.section_row_number=rt}if(-1!=e.indexOf("submit")&&(n.submit_hash=this.hash),-1!=e.indexOf("client")){var st=new Date;n.client_time="function"==typeof this.date_format?this.date_format(st,ws_form_settings.time_format):"",n.client_date="function"==typeof this.date_format?this.date_format(st,ws_form_settings.date_format):""}-1!=e.indexOf("seconds_epoch_midnight")&&((_t=new Date).setHours(0,0,0,0),n.seconds_epoch_midnight=Math.round(_t.getTime()/1e3));if(-1!=e.indexOf("seconds_epoch")){var _t=new Date;n.seconds_epoch=Math.round(_t.getTime()/1e3)}var ot=this.get_currency();if(-1!=e.indexOf("ecommerce"))for(var lt in void 0===this.ecommerce_cart_price_type.total&&(this.ecommerce_cart_price_type.total={float:0,string:this.get_price(0,ot,!1),currency:this.get_price(0,ot)}),n.ecommerce_cart_total_float=this.ecommerce_cart_price_type.total.float,n.ecommerce_cart_total_currency=this.ecommerce_cart_price_type.total.currency,n.ecommerce_cart_total=this.ecommerce_cart_price_type.total.string,$.WS_Form.ecommerce.cart_price_types)$.WS_Form.ecommerce.cart_price_types.hasOwnProperty(lt)&&(void 0===this.ecommerce_cart_price_type[lt]&&(this.ecommerce_cart_price_type[lt]={float:0,string:this.get_price(0,ot,!1),currency:this.get_price(0,ot)}),n["ecommerce_cart_"+lt+"_float"]=this.ecommerce_cart_price_type[lt].float,n["ecommerce_cart_"+lt+"_currency"]=this.ecommerce_cart_price_type[lt].currency,n["ecommerce_cart_"+lt]=this.ecommerce_cart_price_type[lt].string);var nt=e;(e=this.mask_parse(e,n),(e=this.mask_parse(e,c,!0))!==nt&&-1!==e.indexOf("#"))&&(e=(et=this.parse_variables_process(e,t,a,i,r,s,_,o+1)).output,"object"==typeof et.fields&&(d=d.concat(et.fields)));return{output:e,fields:d}},$.WS_Form.prototype.get_data_grid_column=function(e,t,a){if(0===e.length)return e;var i=[];switch(r=t.type){case"select":case"checkbox":case"radio":break;case"price_select":var r="select_price";break;case"price_checkbox":r="checkbox_price";break;case"price_radio":r="radio_price";break;default:return e}var s="data_grid_"+r,_=this.get_object_meta_value(t,r+"_field_value","0"),o=this.get_object_meta_value(t,r+"_field_label","0"),l=this.get_object_meta_value(t,r+"_field_price","0"),n=this.get_object_meta_value(t,r+"_field_parse_variable","0"),c=this.get_object_meta_value(t,r+"_field_wc","0"),d=this.get_object_meta_value(t,s,!1);if(!1===d)return e;if("object"!=typeof d.columns||"object"!=typeof d.groups)return e;var p=0,u=0,h=0,f=0,m=0,v=d.columns,b=parseInt(a,10);for(var g in v)if(v.hasOwnProperty(g)){var y=v[g];void 0!==y.id&&void 0!==y.label&&(y.id==_&&(p=g),y.id==o&&(u=g),y.id==l&&(h=g),y.id==n&&(f=g),y.id==c&&(m=g),y.label===a&&(b=g))}var k=d.groups;for(var w in k)if(k.hasOwnProperty(w)){var x=k[w];if(void 0!==x.rows){var j=x.rows;for(var S in j)if(j.hasOwnProperty(S)){var F=j[S];if(null!==F&&"object"==typeof F.data){var W=F.data,O=$.extend(!0,[],W);if(void 0!==O[p]&&void 0!==O[b]){var M={data_grid_row_price:"",data_grid_row_price_currency:"",data_grid_row_woocommerce_cart:"",data_grid_row_value:O[p],data_grid_row_action_variable:"",data_grid_row_label:""};for(var P in!1!==u&&void 0!==O[u]&&(M.data_grid_row_label=O[u]),!1!==h&&void 0!==O[h]&&(M.data_grid_row_price_currency=this.get_price(O[h]),M.data_grid_row_price=this.get_number(O[h])),!1!==f&&void 0!==O[f]&&(M.data_grid_row_action_variable=O[f]),!1!==m&&void 0!==O[m]&&(M.data_grid_row_woocommerce_cart=O[m]),O)O.hasOwnProperty(P)&&("number"==typeof O[P]&&(O[P]=O[P].toString()),O[P]=this.mask_parse(O[P],M));for(var I in e){if(e.hasOwnProperty(I))if(e[I]===O[p].toString()){if(void 0===F.data[b])continue;i.push(F.data[b])}}}}}}}return i},$.WS_Form.prototype.field_wpautop=function(e,t){var a=void 0!==t.wpautop&&t.wpautop,i=void 0!==t.wpautop_conditions&&t.wpautop_conditions;if(!1!==i&&"object"==typeof i)for(var r in a=!1,i)if(i.hasOwnProperty(r)){var s=i[r];this.get_object_meta_value(e,r,"")===s&&(a=!0)}return a},$.WS_Form.prototype.eval_process=function(eval_input,decimals){try{var eval_output=eval(eval_input);return eval_output===1/0&&(eval_output=0),this.get_number(eval_output,0,!1,decimals)}catch(e){return 0}},$.WS_Form.prototype.closing_string_index=function(e,t,a,i){for(var r=1;r>0;){var s=e.indexOf(a,i),_=e.indexOf(t,i);if(-1!==s&&-1!==_&&s<_)i=s+a.length,r++;else{if(!(-1!==_&&r>1)){if(-1!==_&&1===r)break;break}i=_+t.length,r--}}return _},$.WS_Form.prototype.string_to_attributes=function(e,t){if("string"!=typeof e)return[];if("string"!=typeof t&&(t=","),""==e)return[];var a=1,i=0,r=!1,s="",_=[];for(e.replace("“",'"'),e.replace("”",'"');a>0||i<e.length;){var o=e[i];if(null==o)break;if(o!==t||1!==a||r)if('"'!==o||1!==a){if(!r){switch(o){case"(":a++;break;case")":a--}if(0===a)break}s+=o,i++}else r||(s=""),r=!r,i++;else _.push(s),s="",i++}return _.push(s),_.length&&(_=_.map(function(e){return e=e.replace(/^"(.+(?="$))"$/,"$1")})),_},$.WS_Form.prototype.get_bracket_finish_index=function(e){if(""===e)return-1;e.replace("“",'"'),e.replace("”",'"');for(var t=1,a=1,i=!1;t>0||a<e.length;){var r=e[a];if(void 0===r)break;if('"'!==r){if(!i){switch(r){case"(":t++;break;case")":t--}if(0===t)break}a++}else i=!i,a++}return 0===t?a:(this.error("error_parse_variable_syntax_error_bracket_closing",e,"error-parse-variables"),-1)},$.WS_Form.prototype.parse_variables_process_error=function(e){return{output:e,functions:[],fields:[]}},$.WS_Form.prototype.get_field_value=function(e,t,a,i){var r=this;if(void 0===t&&(t=!1),void 0===a&&(a=!1),void 0===i&&(i=!1),!1===t){var s='[name="'+ws_form_settings.field_prefix+e.id;a&&(s+="[]")}else if(!0===t)s='[name^="'+ws_form_settings.field_prefix+e.id+"[";else{s='[name="'+ws_form_settings.field_prefix+e.id+"["+t+"]";a&&(s+="[]")}if(!$(s+='"]').length)return!1;switch(e.type){case"select":case"price_select":s+=" option:selected";break;case"checkbox":case"radio":case"price_checkbox":case"price_radio":s+=":checked"}var _=[];return $(s,this.form_canvas_obj).each(function(){switch(e.type){case"price_select":!1===i?_.push($(this).attr("data-price")):_.push($(this).val());break;case"price_checkbox":case"price_radio":!1===i?_.push($(this).attr("data-price")):_.push($(this).val());break;case"file":var t=[];switch($(this).attr("data-file-type")){case"dropzonejs":var a=$(this).closest('[data-type="file"]');if(a){var s=$(".dropzone",a)[0].dropzone;if(s.files)t=s.files}break;default:t=$(this)[0].files}var o=[];for(var l in t)if(t.hasOwnProperty(l)){var n=t[l];o.push(n.name)}_.push(o.join(","));break;case"googlemap":var c=$(this).val();if(!c)break;try{var d=JSON.parse(c)}catch(e){break}void 0!==d.lat&&void 0!==d.lng&&_.push(d.lat+","+d.lng);break;default:d=$(this).val();r.is_iterable(d)?_.push(...d):_.push(d)}}),_},$.WS_Form.prototype.get_data_source=function(e){var t={default_value:[]};e=this.field_data_cache[e.id];if(void 0===$.WS_Form.field_type_cache[e.type])return!1;var a=$.WS_Form.field_type_cache[e.type];if(void 0===a.data_source)return!1;var i=a.data_source;if(void 0===i.type)return!1;switch(t.type=i.type,t.type){case"data_grid":if(void 0===i.id)return!1;t.meta_key_data_grid=i.id,t.meta_key_value_column=(a.datagrid_column_value,a.datagrid_column_value),t.data_grid=this.get_object_meta_value(e,t.meta_key_data_grid,!1),t.value_column_id=this.get_object_meta_value(e,t.meta_key_value_column,!1);var r=(t.data_grid.columns,t.data_grid.columns);for(var s in t.value_column_index=!1,r)if(r.hasOwnProperty(s)){var _=r[s];if(void 0!==_.id&&_.id==t.value_column_id){t.value_column_index=s;break}}if(!1!==t.value_column_id&&void 0!==t.data_grid.groups){var o=t.data_grid.groups;for(var l in o)if(o.hasOwnProperty(l)){var n=o[l];if(void 0!==n.rows){var c=n.rows;for(var d in c)if(c.hasOwnProperty(d)){var p=c[d];if(null!==p)if(void 0!==p.default&&"on"===p.default){if(void 0===p.data)continue;if(void 0===p.data[t.value_column_index])continue;t.default_value.push(p.data[t.value_column_index])}}}}}}return t},$.WS_Form.prototype.get_query_var=function(e){var t=window.location.href;if(!t)return"";try{e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a&&a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):""}catch(e){return""}},$.WS_Form.prototype.set_object_meta_value=function(e,t,a){return void 0===e?a:void 0===e.meta?a:void(e.meta[t]=a)},$.WS_Form.prototype.column_class_array=function(e,t){void 0===t&&(t="breakpoint");var a=[],i=this.framework.breakpoints,r=this.framework.columns.column_class,s=this.framework.columns.offset_class,_=0,o=0;for(var l in i)if(i.hasOwnProperty(l)){var n=i[l],c=this.get_object_meta_value(e,t+"_size_"+l,"");if(""==c&&(c="0"),0==(c=parseInt(c,10))){if(void 0!==n.column_size_default)switch(n.column_size_default){case"column_count":c=parseInt($.WS_Form.settings_plugin.framework_column_count,10);break;default:c=parseInt(n.column_size_default,10)}}else c=parseInt(c,10);if(c>0&&c!=_){var d={id:n.id,size_word:void 0===this.number_to_word[c]?c:this.number_to_word[c],size:c};if(void 0!==n.column_class)var p=n.column_class;else p=r;var u=this.mask_parse(p,d);a.push(u),_=c}var h=this.get_object_meta_value(e,t+"_offset_"+l,""),f=!1;if(""!==h&&h!=o){d={id:n.id,offset_word:void 0===this.number_to_word[h]?h:this.number_to_word[h],offset:h};if(void 0!==n.offset_class)var m=n.offset_class;else m=s;u=this.mask_parse(m,d);a.push(u),o=h,f=!0}f&&a.push("wsf-has-offset")}return a},$.WS_Form.prototype.column_classes_render=function(e,t,a){e.closest(".wsf-sections").css("min-height","auto"),e.closest(".wsf-fields").css("min-height","auto"),void 0===a&&(a=!0);for(var i=this.column_class_array(t),r=0;r<i.length;r++)a?e.addClass(i[r]):e.removeClass(i[r])},$.WS_Form.prototype.mask_parse=function(e,t,a){if("string"!=typeof e)return"";void 0===a&&(a=!1);var i=[],r=Object.keys(t);r.sort(function(e,t){if(e===t)return 0;var a=-1!==e.indexOf("("),i=-1!==t.indexOf("(");return a&&i?e<t?1:-1:!a&&i||a&&!i?a<i?1:-1:e<t?1:-1});for(var s=0;s<r.length;s++)i[r[s]]=t[r[s]];for(var _ in t=i)if(t.hasOwnProperty(_)){var o=t[_];e=a?e.replace("#"+_,o):this.replace_all(e,"#"+_,o)}return e},$.WS_Form.prototype.language=function(e,t,a,i){void 0===t&&(t=!1),void 0===a&&(a=!0),void 0===i&&(i=!1);var r="",s="";if("error_language"===e)r="Language reference not found: %s";else if(null!==$.WS_Form.settings_form&&void 0!==$.WS_Form.settings_form.language&&void 0!==$.WS_Form.settings_form.language[e])r=$.WS_Form.settings_form.language[e];return""==r?"error_language"===e||i||this.error("error_language",e):(!1!==t&&(r=this.replace_all(r,"%s",t)),s=a?this.html_encode(r):r),""==s&&(s=""==t?"[LANGUAGE NOT FOUND: "+e+"]":t),s},$.WS_Form.prototype.cookie_set=function(e,t,a,i){void 0===a&&(a=!0),void 0===i&&(i=!0);var r=this.get_object_value($.WS_Form.settings_plugin,"cookie_prefix");if(!r)return!1;if(""==t){if(""==this.cookie_get(e,""))return!1;(_=new Date).setTime(_.getTime()-864e5);var s="expires="+_.toUTCString()+";"}else if(a){var _,o=this.get_object_value($.WS_Form.settings_plugin,"cookie_timeout");if(!o)return!1;(_=new Date).setTime(_.getTime()+1e3*o);s="expires="+_.toUTCString()+";"}else s="";var l=r+"_"+(i?this.form_id+"_":"")+e+"="+t+";"+s+"path=/";return document.cookie=l,!0},$.WS_Form.prototype.cookie_get=function(e,t,a){void 0===a&&(a=!0);var i=this.get_object_value($.WS_Form.settings_plugin,"cookie_prefix");return i?(e=i+"_"+(a?this.form_id+"_":"")+e,this.cookie_get_raw(e,t)):t},$.WS_Form.prototype.cookie_get_raw=function(e,t){if(""===e)return t;var a=decodeURIComponent(document.cookie).split(";");e+="=";for(var i=0;i<a.length;i++){for(var r=a[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return void 0!==t?t:""},$.WS_Form.prototype.cookie_clear=function(e,t){void 0===t&&(t=!0);var a=this.get_object_value($.WS_Form.settings_plugin,"cookie_prefix");if(!a)return!1;var i=new Date;i.setTime(i.getTime()-36e5);var r="expires="+i.toUTCString(),s=a+"_"+(t?this.form_id+"_":"")+e+"='';"+r+";path=/";return document.cookie=s,!0},$.WS_Form.prototype.tabs=function(e,t){void 0===t&&(t={});var a=void 0!==t.selector?t.selector:"li",i=void 0!==t.active?t.active:0,r=void 0!==t.activate&&t.activate,s=this,_=0;e.addClass("wsf-tabs"),$(a,e).each(function(){var e=$(this);e.find('a[href*="#"]:not([href="#"])').each(function(){$(this).attr("data-tab-index",_),$(this).off("click").on("click",function(t){t.preventDefault(),$(this).trigger("wsf-click"),t.stopPropagation(),t.stopImmediatePropagation(),s.tab_show($(this),e,r)}),_==i&&s.tab_show($(this),e)}),_++})},$.WS_Form.prototype.tabs_destroy=function(e,t){void 0===t&&(t={});var a=void 0!==t.selector?t.selector:"li";$(a,e).each(function(){$(this).find("a").each(function(){$(this).removeAttr("data-tab-index"),$(this).off("click")})}),e.removeClass("wsf-tabs")},$.WS_Form.prototype.tab_show=function(e,t,a){var i=this;t.siblings().each(function(){var e=$(this).find("a").first();i.tab_hide(e,$(this))}),t.addClass("wsf-tab-active");var r=e.attr("href");($(r).show(),"function"==typeof a)&&a(e.attr("data-tab-index"));e.trigger("tab_show")},$.WS_Form.prototype.tab_hide=function(e,t){t.removeClass("wsf-tab-active");var a=e.attr("href");$(a).hide()},$.WS_Form.prototype.data_cache_build=function(){if(void 0===this.form)return!1;if(void 0===this.form.groups)return!1;for(var e in this.group_data_cache=[],this.section_data_cache=[],this.field_data_cache=[],this.action_data_cache=[],this.form.groups)if(this.form.groups.hasOwnProperty(e)){var t=this.form.groups[e];this.data_cache_build_group(t)}var a=this.get_object_meta_value(this.form,"action",!1);if(!1!==a&&void 0!==a.groups&&void 0!==a.groups[0]&&"object"==typeof a.groups[0].rows&&0!=a.groups[0].rows.length){var i=a.groups[0].rows;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];null!==s&&"object"==typeof s&&"object"==typeof s.data&&0!=s.data.length&&(this.action_data_cache[s.id]={label:s.data[0]})}}return!0},$.WS_Form.prototype.data_cache_build_group=function(e){for(var t in this.group_data_cache[e.id]=e,e.sections)if(e.sections.hasOwnProperty(t)){var a=e.sections[t];this.data_cache_build_section(a)}return!0},$.WS_Form.prototype.data_cache_build_section=function(e){this.section_data_cache[e.id]=e;var t=void 0!==e.meta&&void 0!==e.meta.section_repeatable&&"on"==e.meta.section_repeatable;for(var a in e.fields)if(e.fields.hasOwnProperty(a)){var i=e.fields[a];t&&(i.section_repeatable_section_id=e.id),void 0!==$.WS_Form.field_type_cache[i.type]&&(this.field_data_cache[i.id]=i)}return!0},$.WS_Form.prototype.array_randomize=function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[a],e[a]=i}return e},$.WS_Form.prototype.get_nice_duration=function(e){if(0==e)return"-";var t=~~(e/3600),a=~~(e%3600/60),i=e%60,r="";return t>0&&(r+=t+" "+this.language("submit_duration_hours")+" "),a>0&&(r+=a+" "+this.language("submit_duration_minutes")+" "),r+=i+" "+this.language("submit_duration_seconds")},$.WS_Form.prototype.ucwords=function(e){return e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,function(e){return e.toUpperCase()})},$.WS_Form.prototype.ucfirst=function(e){var t="";return e.length>0&&(t=e[0].toUpperCase(),e.length>1&&(t+=e.slice(1))),t},$.WS_Form.prototype.capitalize=function(e){return this.ucwords(e.toLowerCase())},$.WS_Form.prototype.sentence=function(e){return this.ucfirst(e.toLowerCase())},$.WS_Form.prototype.get_field_html_single=function(e,t,a,i){void 0===a&&(a=!1),void 0===i&&(i=!1);var r=[],s=void 0!==t,_=!a,o=!1!==i?"-repeat-"+i:"",l=this.get_part_id(e.id,i),n=this.get_field_name(e.id,i),c=["default","class","input_type_datetime","multiple","min","max","step"],d=["class"];if(void 0===$.WS_Form.field_type_cache[e.type])return"";var p=$.WS_Form.field_type_cache[e.type];if(p.pro_required)return this.language("error_pro_required");if(a)var u=!0;else u=this.get_object_meta_value(e,"label_render",!0);var h=this.get_object_meta_value(e,"sub_type",!1);if(""==h&&(h=!1),this.get_field_value_fallback(e.type,!1,"label_disabled",!1,!1,h)&&(u=!1),void 0!==p.submit_array&&p.submit_array&&(n+="[]"),u&&!a){var f=this.get_object_meta_value(e,"label_position","default");"default"==(f=this.get_field_value_fallback(e.type,!1,"label_position_force",f,!1,h))&&(f=this.get_object_meta_value(this.form,"label_position_form","top"))}else f="top";var m=!1;-1===this.get_framework().label_positions.indexOf(f)&&(f="top");var v=$.extend(!0,[],this.get_field_value_fallback(e.type,f,"mask_field_attributes",[],!1,h)),b=void 0!==p.mask_wrappers_drop&&p.mask_wrappers_drop;"recaptcha"==e.type&&"invisible"==this.get_object_meta_value(e,"recaptcha_recaptcha_type","default")&&(b=!0),"hcaptcha"==e.type&&"invisible"==this.get_object_meta_value(e,"hcaptcha_type","default")&&(b=!0);var g=b?"#field":this.get_field_value_fallback(e.type,f,"mask","#field",!1,h),y=this.get_field_value_fallback(e.type,f,"mask_field","",!1,h);if(a){var k=this.get_field_value_fallback(e.type,f,"mask_field_submit",!1,!1,h);!1!==k&&(y=k)}var w=u?this.get_field_value_fallback(e.type,f,"mask_field_label","",!1,h):"",x=this.get_field_value_fallback(e.type,f,"mask_field_label_hide_group",!1,!1,h),j=this.get_field_value_fallback(e.type,f,"mask_help","",!1,h),S=this.get_field_value_fallback(e.type,f,"mask_help_append","",!1,h),F=this.get_field_value_fallback(e.type,f,"mask_help_append_separator","",!1,h),W=this.get_field_value_fallback(e.type,f,"mask_invalid_feedback","",!1,h),O=this.get_object_meta_value(e,"default_value","",!1,!1),M=this.parse_variables_process(O,i,!1,e,"field_value",_).output,P=this.get_object_meta_value(e,"text_editor","",!1,!1),I=this.parse_variables_process(P,i,!1,e,"field_text_editor",_).output,z=this.get_object_meta_value(e,"html_editor","",!1,!1),D=this.parse_variables_process(z,i,!1,e,"field_html",_).output,N=this.get_object_meta_value(e,"ecommerce_calculation_persist","",!1,!0),T=this.get_object_meta_value(e,"dedupe_value_scope","",!1,!0),q=this.get_object_meta_value(e,"hidden_bypass","",!1,!0),C=this.get_object_meta_value(e,"exclude_cart_total","",!1,!0);if(!s){t="";""!=M&&(t=this.html_encode(M)),""!=I&&(t=I),""!=D&&(t=D)}var Y=!0,A="";switch(e.type){case"textarea":Y=""===this.get_object_meta_value(e,"input_type_textarea","");break;case"file":case"googlemap":"object"==typeof t&&(t=this.html_encode(JSON.stringify(t)));break;case"price_range":s&&"price_range"==e.type&&(t=this.get_number(t));break;case"password":A="";var U,J="";if(this.get_object_meta_value(e,"password_generate","",!1,!0))""==(U=this.get_object_meta_value(e,"text_password_generate",""))&&(U=this.language("password_generate")),A+='<div data-wsf-password-generate style="cursor:pointer; user-select:none; outline:0;" title="'+U+'" tabindex="0" role="button" aria-pressed="false"><svg style="display:block;" height="16" width="16" viewBox="0 0 16 16"><path d="M8 0c-3 0-5.6 1.6-6.9 4.1l-1.1-1.1v4h4l-1.5-1.5c1-2 3.1-3.5 5.5-3.5 3.3 0 6 2.7 6 6s-2.7 6-6 6c-1.8 0-3.4-0.8-4.5-2.1l-1.5 1.3c1.4 1.7 3.6 2.8 6 2.8 4.4 0 8-3.6 8-8s-3.6-8-8-8z"/></svg></div>',J="margin-left: 8px;";if(this.get_object_meta_value(e,"password_visibility_toggle","",!1,!0))""==(U=this.get_object_meta_value(e,"text_password_visibility_toggle_off",""))&&(U=this.language("password_visibility_toggle_off")),A+='<div data-wsf-password-visibility-toggle style="cursor:pointer; user-select:none; outline:0;'+J+';" title="'+U+'" tabindex="0" role="button" aria-pressed="false"><svg style="display:block;" height="16" width="16" viewBox="0 0 16 16"><g class="wsf-password-visibility-off"><path d="M8 3.9c-6.7 0-8 5.1-8 5.1s2.2 4.1 7.9 4.1 8.1-4 8.1-4-1.3-5.2-8-5.2zM5.3 5.4c0.5-0.3 1.3-0.3 1.3-0.3s-0.5 0.9-0.5 1.6c0 0.7 0.2 1.1 0.2 1.1l-1.1 0.2c0 0-0.3-0.5-0.3-1.2 0-0.8 0.4-1.4 0.4-1.4zM7.9 12.1c-4.1 0-6.2-2.3-6.8-3.2 0.3-0.7 1.1-2.2 3.1-3.2-0.1 0.4-0.2 0.8-0.2 1.3 0 2.2 1.8 4 4 4s4-1.8 4-4c0-0.5-0.1-0.9-0.2-1.3 2 0.9 2.8 2.5 3.1 3.2-0.7 0.9-2.8 3.2-7 3.2z"></path></g><g class="wsf-password-visibility-on" style="display:none"><path d="M12.9 5.2l-0.8 0.8c1.7 0.9 2.5 2.3 2.8 3-0.7 0.9-2.8 3.1-7 3.1-0.7 0-1.2-0.1-1.8-0.2l-0.8 0.8c0.8 0.3 1.7 0.4 2.6 0.4 5.7 0 8.1-4 8.1-4s-0.6-2.4-3.1-3.9z"></path><path d="M12 7.1c0-0.3 0-0.6-0.1-0.8l-4.8 4.7c0.3 0 0.6 0.1 0.9 0.1 2.2 0 4-1.8 4-4z"></path><path d="M15.3 0l-4.4 4.4c-0.8-0.2-1.8-0.4-2.9-0.4-6.7 0-8 5.1-8 5.1s1 1.8 3.3 3l-3.3 3.2v0.7h0.7l15.3-15.3v-0.7h-0.7zM4 11.3c-1.6-0.7-2.5-1.8-2.9-2.3 0.3-0.7 1.1-2.2 3.1-3.2-0.1 0.4-0.2 0.8-0.2 1.3 0 1.1 0.5 2.2 1.3 2.9l-1.3 1.3zM6.2 7.9l-1 0.2c0 0-0.3-0.5-0.3-1.2 0-0.8 0.4-1.5 0.4-1.5 0.5-0.3 1.3-0.3 1.3-0.3s-0.5 0.9-0.5 1.7c-0.1 0.7 0.1 1.1 0.1 1.1z"></path></g></svg></div>'}var E=Y?this.parse_variables_process(this.get_object_meta_value(e,"prepend",""),i,!1,e,"field_prepend",_).output:"";A+=Y?this.parse_variables_process(this.get_object_meta_value(e,"append",""),i,!1,e,"field_prepend",_).output:"";var H="";if(!a){var L=[],G=this.get_object_meta_value(this.form,"class_field","",!1,!0);if(""!=G&&L.push(G),""!=(H=this.get_object_meta_value(e,"class_field","",!1,!0))&&L.push(H),!this.get_object_meta_value(e,"class_field_full_button_remove","")){var Z=this.get_field_value_fallback(e.type,f,"class_field_full_button","",!1,h);"object"==typeof Z&&L.push(Z.join(" "))}if(!(B=this.get_object_meta_value(e,"class_field_button_type",!1)))var B=this.get_field_value_fallback(e.type,f,"class_field_button_type_fallback",!1,!1,h);if(B){var R=this.get_field_value_fallback(e.type,f,"class_field_button_type","",!1,h);void 0!==R[B]&&L.push(R[B])}var Q=this.get_object_meta_value(e,"class_field_message_type",!1);if(Q){var K=this.get_field_value_fallback(e.type,f,"class_field_message_type","",!1,h);void 0!==K[Q]&&L.push(K[Q])}if(""!==E||""!==A){var V=this.get_field_value_fallback(e.type,f,"class_field_input_group","",!1,h);""!==V&&L.push(V)}var X=void 0!==p.label_inside&&p.label_inside;if(X&&"inside"===f){switch(e.type){case"textarea":var ee=this.get_object_meta_value(e,"input_type_textarea",!1);m=!("tinymce"===ee||"html"===ee);break;case"select":case"price_select":m=!this.get_object_meta_value(e,"select2",!1);break;default:m=!0}m||(f="top")}X||"inside"!==f||(f="top"),m&&(e.meta.placeholder=this.parse_variables_process(e.label,i,!1,e,"field_label",_).output),H=L.join(" ")}var te=parseInt($.WS_Form.settings_plugin.framework_column_count,10),ae=parseInt(this.get_object_meta_value(this.form,"label_column_width_form",3),10),ie=this.get_object_meta_value(e,"label_column_width","default");switch(ie){case"default":case"":ie=ae;break;default:ie=parseInt(ie,10)}ie>=te&&(ie=te-1);var re=te-ie,se={id:l,form_id_prefix:this.form_id_prefix,form_id:this.form_id,form_instance_id:this.form_instance_id,field_id:e.id,name:n,label:this.parse_variables_process(e.label,i,!1,e,"field_label",_).output,value:t,required:this.get_object_meta_value(this.form,"label_required")?'<span class="wsf-required-wrapper"></span>':"",column_width_label:ie,column_width_field:re,max_upload_size:ws_form_settings.max_upload_size,locale:ws_form_settings.locale,currency:$.WS_Form.settings_plugin.currency};switch(e.type){case"datetime":"on"==$.WS_Form.settings_plugin.ui_datepicker||"native"==$.WS_Form.settings_plugin.ui_datepicker&&!this.native_date?(se.datetime_type="text",m&&v.push("placeholder")):se.datetime_type=this.get_object_meta_value(e,"input_type_datetime","date");break;case"color":"on"==$.WS_Form.settings_plugin.ui_color||"native"==$.WS_Form.settings_plugin.ui_color&&!this.native_color?se.color_type="text":se.color_type="color";break;case"file":switch(h){case"dropzonejs":var _e=this.get_object_meta_value(e,"placeholder","",!1,!0);""==_e&&(_e=this.language("dropzonejs_default_message")),se.placeholder=_e}}var oe=this.get_field_value_fallback(e.type,f,"meta_key_parse_variables",[],!1,h);for(var le in oe)if(oe.hasOwnProperty(le)){var ne=oe[le],ce=!1!==(ft=void 0!==$.WS_Form.meta_keys[ne]&&$.WS_Form.meta_keys[ne])?void 0===ft.d?"":ft.d:"",de=this.get_object_meta_value(e,ne,ce);"object"==typeof de&&(de=JSON.stringify(de)),de=this.replace_all(de,"'","&#39;"),se[ne]=de}var pe=$.extend(!0,{},se);pe.label_id=this.get_part_id(e.id,i,"label");var ue=[],he=this.get_part_id(e.id,i,"help"),fe=""!==(me=a?"":this.get_object_meta_value(e,"help","",!1,!1)),me=this.parse_variables_process(me,i,!1,e,"field_help",_).output;if(a)switch(e.type){case"range":me="#value"}var ve=this.get_field_value_fallback(e.type,f,"class_help",[],!1,h);ue.id=l,ue.help_id=he,ue.help_class=ve.join(" "),ue.help=me,se.help_class=ve.join(" ");var be=!a&&this.get_object_meta_value(e,"invalid_feedback_render",!1,!1,!0),ge=!1;if(be){var ye=$.extend(!0,{},se),ke=this.form_id_prefix+"invalid-feedback-"+e.id+o,we=this.get_field_value_fallback(e.type,f,"class_invalid_feedback",[],!1,h),xe=(ge=this.get_field_value_fallback(e.type,f,"invalid_feedback_last_row",!1,!1,h),this.get_object_meta_value(e,"invalid_feedback","",!1,!0)),$e=void 0!==p.invalid_feedback?p.invalid_feedback:this.invalid_feedback_mask_placeholder;if(""==xe&&""!=$e){var je=e.label;xe=this.replace_all($e,"#label_lowercase",je.toLowerCase());xe=this.replace_all(xe,"#label",je)}ye.invalid_feedback_id=ke,ye.invalid_feedback_class=we.join(" "),ye.invalid_feedback=xe,ye.attributes="";var Se=this.mask_parse(W,ye)}else ke=!1,Se="";if(se.invalid_feedback=Se,pe.invalid_feedback=Se,se.attributes="",a)v=c.filter(function(e){return-1!=v.indexOf(e)});if(v.length>0){var Fe=this.get_attributes(e,v,!1,i);se.attributes+=" "+Fe.attributes,v=Fe.mask_attributes,r=Fe.attribute_values}!1!==i&&(se.attributes+=' data-repeatable-index="'+i+'"');var We="",Oe=!1;switch(e.type){case"select":case"price_select":case"checkbox":case"price_checkbox":case"radio":case"price_radio":if(this.get_object_meta_value(e,e.type+"_cascade",!1)){Oe=parseInt(this.get_object_meta_value(e,e.type+"_cascade_field_filter",!1),10);var Me=parseInt(this.get_object_meta_value(e,e.type+"_cascade_field_id",!1),10);if(Me>0){var Pe=' data-cascade-field-id="'+Me+'"';switch(e.type){case"select":case"price_select":se.attributes+=Pe;break;case"checkbox":case"price_checkbox":case"radio":case"price_radio":We=Pe}}}this.get_object_meta_value(e,"select2_ajax",!1)&&t&&(se.attributes+=' data-wsf-populate="'+this.attr_encode(JSON.stringify(t))+'"')}var Ie=this.get_object_meta_value(e,"custom_attributes",!1);if(!1!==Ie&&"object"==typeof Ie&&Ie.length>0)for(var ze in Ie)if(Ie.hasOwnProperty(ze)){var De=Ie[ze];""!=De.custom_attribute_name&&(De.custom_attribute_value=this.parse_variables_process(De.custom_attribute_value,i,!1,e).output,se.attributes=this.attribute_modify(se.attributes,De.custom_attribute_name,De.custom_attribute_value,!0))}var Ne=this.get_object_meta_value(e,"orientation",!1);if("grid"==Ne)var Te=this.get_field_value_fallback(e.type,f,"class_orientation_wrapper",[],!1,h),qe=this.get_field_value_fallback(e.type,f,"class_orientation_row",[],!1,h),Ce=Te.join(" "),Ye=this.column_class_array(e,"orientation_breakpoint"),Ae=(Ye=qe.concat(Ye)).join(" ");pe.attributes="";var Ue=$.extend(!0,[],this.get_field_value_fallback(e.type,f,"mask_field_label_attributes",[],!1,h));if(a)Ue=d.filter(function(e){return-1!=Ue.indexOf(e)});if(Ue.length>0){Fe=this.get_attributes(e,Ue,!1,i);pe.attributes+=Fe.attributes,Ue=Fe.mask_attributes}var Je="",Ee=this.get_object_value(p,"data_source",!1),He=0,Le=!1!==Ee;if(Le){if(void 0===Ee.type)Le=!1;else var Ge=Ee.type;if(void 0===Ee.id)Le=!1;else var Ze=Ee.id}if(Le){switch(Ge){case"data_grid":var Be=this.get_object_meta_value(e,Ze,!1)}if(!1===Be&&(Le=!1),void 0===Be.columns)Le=!1;else var Re=Be.columns}if(Le){var Qe=this.get_field_value_fallback(e.type,f,"mask_group","",!1,h),Ke=this.get_field_value_fallback(e.type,f,"mask_group_wrapper","",!1,h),Ve=this.get_field_value_fallback(e.type,f,"mask_group_label","",!1,h),Xe=this.get_field_value_fallback(e.type,f,"mask_group_always",!1,!1,h),et=this.get_field_value_fallback(e.type,f,"mask_row","",!1,h),tt=this.get_field_value_fallback(e.type,f,"mask_row_placeholder","",!1,h),at=this.get_field_value_fallback(e.type,f,"mask_row_field","",!1,h),it=this.get_field_value_fallback(e.type,f,"mask_row_label","",!1,h),rt=this.get_field_value_fallback(e.type,f,"mask_row_lookups",[],!1,h),st=this.get_field_value_fallback(e.type,f,"datagrid_column_value",!1,!1,h),_t=this.get_field_value_fallback(e.type,f,"mask_row_default","",!1,h),ot=this.get_field_value_fallback(e.type,f,"mask_row_required"," required data-required",!1,h),lt=this.get_field_value_fallback(e.type,f,"mask_row_disabled"," disabled",!1,h),nt=(this.get_field_value_fallback(e.type,f,"mask_row_visible"," visible",!1,h),this.get_object_meta_value(e,"data_grid_rows_randomize","",!1,!0));if(nt)this.get_object_meta_value(e,"data_source_term_hierarchy","",!1,!0)&&(nt=!1);var ct=this.get_object_meta_value(e,"placeholder_row","",!1,!0),dt=this.get_object_meta_value(e,"multiple","",!1,!0);if(""!=ct&&!dt){var pt=$.extend(!0,{},se);pt.value=ct,Je+=this.mask_parse(tt,pt)}s&&"object"!=typeof t&&("string"!=typeof t&&(t=t.toString()),t=[t]);var ut=[];for(var ht in rt)if(rt.hasOwnProperty(ht)){if(ut[Pt=rt[ht]]=!1,!1===(Yt=this.get_object_meta_value(e,Pt,!1,!1,!0))){if(void 0===$.WS_Form.meta_keys[Pt])continue;var ft;(Yt=void 0!==(ft=$.WS_Form.meta_keys[Pt]).d?ft.d:0)>Re.length&&(Yt=0)}var mt=!1;for(var vt in Re){if(Re.hasOwnProperty(vt))if(Re[vt].id==Yt){mt=vt;break}}mt&&(ut[Pt]=mt)}var bt=!1;if(!1!==Oe){mt=!1;for(var vt in Re){if(Re.hasOwnProperty(vt))if(Re[vt].id==Oe){bt=vt;break}}}if(void 0===Be.groups)return this.error("error_data_source_groups"),"";var gt=Be.groups;Object.keys(gt).length;for(var yt in nt&&(gt=this.array_randomize(gt)),gt)if(gt.hasOwnProperty(yt)){var kt=$.extend(!0,{},se);kt.group_id=this.form_id_prefix+"datagrid-"+e.id+"-group-"+yt+o;var wt=gt[yt];if(void 0===wt.label)return this.error("error_data_group_label"),"";switch(e.type){case"select":case"price_select":var xt=!0;break;default:xt=void 0===wt.label_render||wt.label_render}if(xt){var $t=$.extend(!0,{},se);$t.group_label=this.html_encode(wt.label),$t.label_row_id=this.form_id_prefix+"label-"+e.id+"-group-"+yt+o,kt.group_label=this.mask_parse(Ve,$t)}else kt.group_label="";kt.disabled=void 0!==wt.disabled&&"on"==wt.disabled?" disabled":"";var jt=void 0!==wt.mask_group&&"on"==wt.mask_group||Xe;jt&&x&&(w="");var St="";if(void 0!==wt.rows){var Ft=JSON.parse(JSON.stringify(wt.rows)),Wt=this.get_object_meta_value(e,"select_all","");if(("checkbox"==e.type||"price_checkbox"==e.type)&&"on"==Wt){var Ot=!1,Mt=!1;for(var Pt in ut)if(ut.hasOwnProperty(Pt)){var It=ut[Pt];"checkbox_field_value"==Pt&&(Ot=It),"checkbox_field_label"==Pt&&(Mt=It),"checkbox_price_field_value"==Pt&&(Ot=It),"checkbox_price_field_label"==Pt&&(Mt=It)}Wt={id:0,default:"",required:"",hidden:"",disabled:"",select_all:!0,data:[]};var zt=this.get_object_meta_value(e,"select_all_label","");""==zt&&(zt=this.language("select_all_label")),Wt.data[Ot]=zt,Wt.data[Mt]=zt,Ft.unshift(Wt)}for(var Dt in nt&&(Ft=this.array_randomize(Ft)),Ft)if(Ft.hasOwnProperty(Dt)){var Nt=Ft[Dt],Tt=!1;if(!1!==bt)Tt=void 0!==Nt.data[bt]&&Nt.data[bt];var qt=!ge||Dt==Ft.length-1,Ct=$.extend(!0,{},se);for(var Pt in Ct.data_grid_row_value="",Ct.data_grid_row_action_variable="",Ct.data_grid_row_label="",Ct.data_grid_row_price="",Ct.data_grid_row_price_currency="",Ct.data_grid_row_woocommerce_cart="",ut){if(ut.hasOwnProperty(Pt))if(Ct[Pt]="",!1!==(mt=ut[Pt])&&void 0!==Nt.data[mt]){null===(Yt=Nt.data[mt])&&(Yt="");var Yt=this.parse_variables_process(Yt.toString(),i,!1,e,"data_grid_row",_).output;switch(Ct[Pt+"_html"]=this.html_encode(Yt),e.type){case"range":case"price_range":var At=this.get_object_meta_value(e,"min",0);(""==At||isNaN(At))&&(At=0);var Ut=this.get_object_meta_value(e,"max",100);(""==Ut||isNaN(Ut))&&(Ut=100);var Jt=this.get_number(Yt,!0),Et=parseFloat(Ut)-parseFloat(At),Ht=Et>0?(Jt-At)/Et*100:0;Ct[Pt+"_percentage"]=Ht,-1!==Pt.indexOf("_field_percentage")&&(Ct.data_grid_row_value_percentage=Ht)}Ct[Pt+"_compare"]=Yt;var Lt=!1;if(void 0!==$.WS_Form.meta_keys[Pt]){var Gt=$.WS_Form.meta_keys[Pt];void 0!==Gt.h&&Gt.h&&(Yt=this.html_encode(Yt));Lt=void 0!==Gt.pr&&Gt.pr}if(Lt){var Zt=this.get_number(Yt),Bt=Pt+"_currency",Rt=this.get_price(Zt);Ct[Bt]=Rt,Ct[Pt]=Zt,-1!==Pt.indexOf("_price_field_price")&&(Ct.data_grid_row_price=Zt),-1!==Bt.indexOf("_price_field_price_currency")&&(Ct.data_grid_row_price_currency=Rt)}else Ct[Pt]=Yt;-1!==Pt.indexOf("_field_value")&&(Ct.data_grid_row_value=Yt),-1!==Pt.indexOf("_field_parse_variable")&&(Ct.data_grid_row_action_variable=Yt),-1!==Pt.indexOf("_field_label")&&(Ct.data_grid_row_label=Yt),-1!==Pt.indexOf("_field_wc")&&(Ct.data_grid_row_woocommerce_cart=Yt)}}void 0!==p.mask_row_value&&(Ct.row_value=this.mask_parse(p.mask_row_value,Ct),Ct.row_value.indexOf("#")>-1&&(Ct.row_value=this.mask_parse(Ct.row_value,Ct))),void 0!==p.mask_row_price&&(Ct.row_price=this.mask_parse(p.mask_row_price,Ct)),Nt.select_all?Ct.row_id=this.form_id_prefix+"field-"+e.id+"-group-"+yt+"-row-"+Nt.id+o:Ct.row_id=this.form_id_prefix+"field-"+e.id+"-row-"+Nt.id+o,Ct.data_id=Nt.id;var Qt=$.extend(!0,{},Ct),Kt=$.extend(!0,{},Ct);Kt.label_id=this.form_id_prefix+"label-"+e.id+o,Kt.label_row_id=this.form_id_prefix+"label-"+e.id+"-row-"+Nt.id+o;var Vt=[];(!s&&Nt.default||s&&!1!==st&&t.indexOf(Ct[st+"_compare"])>-1||s&&void 0!==Ct.row_value&&t.indexOf(Ct.row_value)>-1)&&(Vt.default=_t),Nt.disabled&&(Vt.disabled=lt),Nt.required&&(Vt.required=ot),Vt.dedupe_value_scope=T,Vt.hidden_bypass=q,Vt.exclude_cart_total=C,Vt.ecommerce_calculation_persist=N,Ct.attributes=We,Kt.attributes="",Qt.attributes="";var Xt=$.extend(!0,[],Vt);if(!a){var ea="horizontal"==Ne&&this.get_field_value_fallback(e.type,f,"class_inline",!1,!1,h);!1!==ea&&(Xt.class=ea.join(" "));var ta=this.get_field_value_fallback(e.type,f,"class_row",!1,!1,h);if(!1!==ta&&(Xt.class=!1!==ea?Xt.class+" "+ta.join(" "):ta.join(" ")),Nt.disabled){var aa=this.get_field_value_fallback(e.type,f,"class_row_disabled",!1,!1,h);!1!==aa&&(Xt.class+=" "+aa.join(" "))}}var ia=$.extend(!0,[],this.get_field_value_fallback(e.type,f,"mask_row_attributes",[],!1,h));if(ia.length>0){Fe=this.get_attributes(e,ia,Xt,i);Ct.attributes+=" "+Fe.attributes}if(!1!==Tt&&(Ct.attributes+=' data-cascade-value="'+this.html_encode(Tt)+'"'),void 0!==Nt.hidden&&Nt.hidden&&!a)switch(e.type){case"select":continue;default:Ct.attributes+=' style="display:none;"'}"grid"==Ne&&""!=Ae&&(Ct.attributes=this.attribute_modify(Ct.attributes,"class",Ae,!0));Xt=$.extend(!0,[],Vt);var ra=this.get_field_value_fallback(e.type,f,"class_row_field_label",!1,!1,h);!1!==ra&&(Xt.class=ra.join(" "));var sa=$.extend(!0,[],this.get_field_value_fallback(e.type,f,"mask_row_label_attributes",[],!1,h));if(a)sa=d.filter(function(e){return-1!=sa.indexOf(e)});if(sa.length>0){Fe=this.get_attributes(e,sa,Xt,i);Kt.attributes+=" "+Fe.attributes}Xt=$.extend(!0,[],Vt);var _a=this.get_field_value_fallback(e.type,f,"class_row_field",!1,!1,h);!1!==_a&&(Xt.class=_a.join(" ")),a||""==H||(Xt.class+=" "+H.trim()),Xt.aria_labelledby=Kt.label_row_id,(!s&&Nt.default||s&&!1!==st&&t.indexOf(Ct[st+"_compare"])>-1)&&(Xt.default=_t),Nt.disabled&&(Xt.disabled=lt),Nt.required&&(Xt.required=ot),Xt.required_row=r.required;var oa=$.extend(!0,[],this.get_field_value_fallback(e.type,f,"mask_row_field_attributes",[],!1,h));if(a)oa=c.filter(function(e){return-1!=oa.indexOf(e)});if(oa.length>0){Fe=this.get_attributes(e,oa,Xt,i);Qt.attributes+=" "+Fe.attributes}if(""!=Qt.attributes&&(Qt.attributes=" "+Qt.attributes),void 0!==Nt.select_all&&(Qt.attributes+=" data-wsf-select-all"),void 0!==Nt.hierarchy&&""==Ne&&!nt)switch(e.type){case"checkbox":case"price_checkbox":case"radio":case"price_radio":Ct.attributes+=' data-wsf-hierarchy="'+Nt.hierarchy+'"';break;case"select":case"price_select":Nt.hierarchy>0&&(Ct.select_field_label="&nbsp;&nbsp;&nbsp;".repeat(Nt.hierarchy)+Ct.select_field_label)}if(be&&!ge)if(ke=this.form_id_prefix+"invalid-feedback-"+e.id+"-row-"+Nt.id+o,ye.invalid_feedback_id=ke,be)Se=this.mask_parse(W,ye);else Se="";Qt.invalid_feedback=qt?Se:"",Kt.invalid_feedback=qt?Se:"";var la=this.mask_parse(at,Qt);Kt.row_field=la,Ct.row_field=la;var na=this.mask_parse(it,Kt);Ct.row_label=na,St+=this.mask_parse(et,Ct),He++}}if(""!=Ke){var ca={group:St};"grid"==Ne&&""!=Ce&&(ca.attributes=' class="'+Ce+'"'),St=this.mask_parse(Ke,ca)}!1!==Qe&&jt?(kt.group=St,Je+=this.mask_parse(Qe,kt)):Je+=St}}if(se.datalist=He>0?Je:"",v.length>0){Xt=[];void 0!==kt&&void 0!==kt.group_id&&He>0&&(Xt.list=kt.group_id),""===this.get_object_meta_value(e,"aria_label",!1,!1,!0)&&(u&&-1!==w.indexOf("#attributes")?Xt.aria_labelledby=this.form_id_prefix+"label-"+e.id+o:Xt.aria_label=e.label),fe&&(Xt.aria_describedby=he),!1!==(L=this.get_field_value_fallback(e.type,f,"class_field",!1,!1,h))&&(Xt.class=L.join(" ")),""!=H&&(Xt.class+=" "+H.trim()),""!=(Fe=this.get_attributes(e,v,Xt,i)).attributes&&(se.attributes+=" "+Fe.attributes)}if(Ue.length>0){Xt=[];var da=this.get_field_value_fallback(e.type,f,"class_field_label",!1,!1,h);!1!==da&&(Xt.class=da.join(" ")),""!=(Fe=this.get_attributes(e,Ue,Xt,i)).attributes&&(pe.attributes+=" "+Fe.attributes)}if(ue.help_append_separator=fe?this.mask_parse(F,ue):"",""!=S){ue.text_clear=this.get_object_meta_value(e,"text_clear",""),""==ue.text_clear&&(ue.text_clear=this.language("clear")),ue.text_reset=this.get_object_meta_value(e,"text_reset",""),""==ue.text_reset&&(ue.text_reset=this.language("reset"));var pa=this.mask_parse(S,ue)}else pa="";ue.help_append=pa,ue.attributes="";var ua=fe||""!=pa?this.mask_parse(j,ue):"";se.help=ua,pe.help=ua,""!=se.attributes&&(se.attributes=" "+se.attributes.trim()),""!=pe.attributes&&(pe.attributes=" "+pe.attributes.trim());var ha=this.mask_parse(w,pe);if(""!=ha&&!b){var fa=this.get_field_value_fallback(e.type,f,"mask_field_label_wrapper",!1,!1,h);if(!1!==fa){var ma={label:ha};ha=this.mask_parse(fa,ma)}}var va=-1!==w.indexOf("#field");switch(f){case"inside":case"bottom":se.pre_label="",se.post_label=va?se.label:ha;break;case"top":se.pre_label=va?se.label:ha,se.post_label="";break;default:se.pre_label="",se.post_label="",pe.pre_label="",pe.post_label=""}if(""!==E||""!==A){var ba=$.extend(!0,{},se);ba.invalid_feedback=se.invalid_feedback,ba.help=se.help,ba.pre_label=se.pre_label,ba.post_label=se.post_label,se.invalid_feedback="",se.help="",se.pre_label="",se.post_label=""}var ga=this.mask_parse(y,se);if(""!==E||""!==A){var ya=this.get_field_value_fallback(e.type,f,"col_small_prepend_factor",!1,!1,h),ka=this.get_field_value_fallback(e.type,f,"col_small_append_factor",!1,!1,h);if(!1!==ya&&!1!==ka){var wa=""!==E?Math.round(te*ya,0):0;ba.col_small_prepend=wa;var xa=""!==A?Math.round(te*ka,0):0;ba.col_small_append=xa,ba.col_small_field=te-(wa+xa)}ba.field=ga;var $a=this.get_field_value_fallback(e.type,f,"mask_field_input_group_field","#field",!1,h);if(""!==$a&&(ga=this.mask_parse($a,ba)),""!==E){ba.prepend=E;var ja=this.get_field_value_fallback(e.type,f,"mask_field_input_group_prepend","#prepend",!1,h);if(""!==ja)ga=this.mask_parse(ja,ba)+ga}if(""!==A){ba.append=A;var Sa=this.get_field_value_fallback(e.type,f,"mask_field_input_group_append","#append",!1,h);if(""!==Sa)ga+=this.mask_parse(Sa,ba)}var Fa=this.get_field_value_fallback(e.type,f,"mask_field_input_group","#field",!1,h),Wa=[];""!==E&&Wa.push("wsf-input-group-has-prepend"),""!==A&&Wa.push("wsf-input-group-has-append");var Oa=Wa.join(" ");Oa&&(Oa=" "+Oa),ba.css_input_group=Oa,ba.field=ga,ga=this.mask_parse(Fa,ba)}if(va&&(pe.field=ga,ha=this.mask_parse(w,pe),ga="",pe.field=""),-1!==y.indexOf("#label")&&(se.label=ha,ga=this.mask_parse(y,se),ha="",se.label=""),""!=ga&&!b){var Ma=this.get_field_value_fallback(e.type,f,"mask_field_wrapper",!1,!1,h);if(!1!==Ma){var Pa={field:ga};ga=this.mask_parse(Ma,Pa)}}switch(f){case"right":ga+=ha;break;case"left":ga=ha+ga;break;default:va&&(ga=ha)}return se.field=ga,this.mask_parse(g,se)},$.WS_Form.prototype.attribute_modify=function(e,t,a,i){var r=!1,s="";return $("<div "+e+" />").each(function(){$.each(this.attributes,function(){if(this.specified){var e=this.name,_=this.value;e==t&&(i?_+=" "+a:_=a,_.trim(),r=!0),s+=" "+e,""!==_&&(s+='="'+_+'"')}})}),r||(s+=" "+t,""!==a&&(s+='="'+a+'"')),s},$.WS_Form.prototype.form_help_value=function(e){var t=this;void 0===e&&(e=this.form_canvas_obj),$('input[type="range"]:not([data-init-help-value]),meter:not([data-init-help-value])',e).each(function(){t.form_help_value_render($(this))&&($(this).on("input change",function(){t.form_help_value_render($(this))}),$(this).attr("data-init-help-value",""))})},$.WS_Form.prototype.form_help_value_render=function(e){var t=e.attr("id"),a=e.closest("[data-type]"),i=a.attr("data-id"),r=a.attr("data-repeatable-index"),s=void 0!==r?"-repeat-"+r:"",_=this.field_data_cache[i],o=this.get_object_meta_value(_,"help",""),l=!1;if(void 0!==e.attr("data-fill-lower-track")){var n=parseFloat(e[0].min||"0"),c=parseFloat(e[0].max||"100"),d=parseFloat(e[0].value||n),p=c-n,u=p>0?(d-n)/p*100+"%":"0%";$("#"+t).get(0).style.setProperty("--wsf-fill-lower-track",u),l=!0}if(-1!==o.indexOf("#value")){var h={id:t,value:e.val()},f=this.mask_parse(o,h),m=(f=this.parse_variables_process(f,r,!1,_,"field_help").output,this.form_id_prefix+"help-"+i+s);$("#"+m).html(f),l=!0}return l},$.WS_Form.prototype.get_attributes=function(e,t,a,i){"object"!=typeof a&&(a=!1);var r=[],s=[];if(!1!==t)for(var _ in t)if(t.hasOwnProperty(_)){var o=t[_];if(void 0!==$.WS_Form.meta_keys[o]){var l=$.WS_Form.meta_keys[o];if(this.is_admin)var n=void 0!==l.mask?l.mask:"",c=void 0!==l.mask_disregard_on_empty&&l.mask_disregard_on_empty,d=void 0!==l.mask_disregard_on_zero&&l.mask_disregard_on_zero,p=void 0!==l.default?l.default:"";else n=void 0!==l.m?l.m:"",c=void 0!==l.e&&l.e,d=void 0!==l.z&&l.z,p=void 0!==l.d?l.d:"";if(!1!==a)if(void 0!==a[o])var u=a[o].trim();else u="";else{if(this.is_admin)var h=void 0!==l.key?l.key:o;else h=void 0!==l.k?l.k:o;var f=void 0!==l.c&&l.c;if(!1!==f){u=this.get_object_meta_value(e,h,p,!1,!1);u=this.parse_variables_process(u,i,!1,e,f).output}else u=this.get_object_meta_value(e,h,p,!1,!0);s[h]=u}u=this.html_encode(u);var m=this.mask_parse(n,{value:u});(c&&""!=u||!c)&&(d&&0!=parseInt(u,10)||!d)&&(r.push(m),delete t[_])}}return t=$.grep(t,function(e){return 0==e||e}),{attributes:r.join(" "),mask_attributes:t,attribute_values:s}},$.WS_Form.prototype.get_number=function(e,t,a,i){if(void 0===t&&(t=0),void 0===a&&(a=!0),void 0===i&&(i=!1),"number"==typeof e&&(e=e.toString()),"string"!=typeof e)return 0;(e=e.trim()).includes(ws_form_settings.currency_symbol)&&(a=!0);var r=$.WS_Form.settings_plugin.price_decimal_separator;if(a){var s=$.WS_Form.settings_plugin.price_thousand_separator,_=ws_form_settings.currency_symbol;e.includes("&")&&(e=this.parse_html_entities(e)),e=e.replace(_,"");var o=new RegExp("[^0-9-"+r+"]","g");if(e=e.replace(o,""),""!==r&&""!==s&&r===s){if(e.substr(-3,1)===r){var l=e.length-3;e=e.substr(0,l)+"[dec]"+e.substr(l+1)}e=(e=e.replace(s,"")).replace("[dec]",".")}else""!==r&&(e=e.replace(r,"."))}else""!==r&&(e=e.replace(r,"."));var n=""===e.trim()?t:isNaN(e)?t:parseFloat(e);return!1!==i&&(n=this.get_number_rounded(parseFloat(n),i)),n},$.WS_Form.prototype.get_number_rounded=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},$.WS_Form.prototype.get_number_to_step=function(e,t){if(isNaN(t))return e;t||(t=1);var a=1/t;return Math.round(e*a)/a},$.WS_Form.prototype.get_float=function(e,t){return void 0===t&&(t=0),"number"==typeof e&&(e=e.toString()),"string"!=typeof e?0:(e=e.trim(),parseFloat(e))},$.WS_Form.prototype.get_currency=function(){var e={},t=parseInt($.WS_Form.settings_plugin.price_decimals,10);switch(e.prefix=ws_form_settings.currency_symbol,e.suffix="",$.WS_Form.settings_plugin.currency_position){case"right":e.prefix="",e.suffix=ws_form_settings.currency_symbol;break;case"left_space":e.prefix=ws_form_settings.currency_symbol+" ";break;case"right_space":e.prefix="",e.suffix=" "+ws_form_settings.currency_symbol}return e.decimals=t<0?0:t,e.decimal_separator=$.WS_Form.settings_plugin.price_decimal_separator,e.thousand_separator=$.WS_Form.settings_plugin.price_thousand_separator,e},$.WS_Form.prototype.get_price=function(e,t,a){return void 0===t&&(t=this.get_currency()),void 0===a&&(a=!0),"number"!=typeof e&&(e=parseFloat(e)),(a?t.prefix:"")+this.replace_all(this.replace_all(e.toFixed(t.decimals).replace(/\B(?=(\d{3})+(?!\d))/g,"[thousand]"),".",t.decimal_separator),"[thousand]",t.thousand_separator)+(a?t.suffix:"")},$.WS_Form.prototype.parse_html_entities=function(e){return e.replace(/&#([0-9]{1,3});/gi,function(e,t){var a=parseInt(t,10);return String.fromCharCode(a)})},$.WS_Form.prototype.form_add_hidden_input=function(e,t,a,i,r,s){var _=$('input[name="'+e+'"]',this.form_canvas_obj);_.length&&-1===e.indexOf("[]")?_.val(t):(void 0===t&&(t=""),void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===s&&(s="hidden"),this.form_canvas_obj.append('<input type="'+s+'" name="'+e+'" value='+(r?"'":'"')+t+(r?"'":'"')+(!1!==a?' id="'+a+'"':"")+(!1!==i?" "+i:"")+" />"))},$.WS_Form.prototype.get_part_id=function(e,t,a){void 0===t&&(t=!1),void 0===a&&(a="field");var i=!1!==t?"-repeat-"+t:"";return this.form_id_prefix+a+"-"+e+i},$.WS_Form.prototype.get_field_name=function(e,t,a){void 0===t&&(t=!1),void 0===a&&(a=!1);return this.field_name_prefix+e+(!1!==t?a?"_"+t:"["+t+"]":"")},$.WS_Form.prototype.is_iterable=function(e){return null!=e&&("object"==typeof e&&"function"==typeof e[Symbol.iterator])},$.WS_Form.prototype.replace_all=function(e,t,a){return void 0===a?e.toString():e.split(t).join(a)},$.WS_Form.prototype.get_date=function(e,t,a){switch(t||(t="date"),a||(a=ws_form_settings.date_format),t){case"time":return e="01/01/1970 "+e,new Date(e);case"date":e+=" 00:00:00";break;case"week":case"month":return!1}var i=!1;switch(a){case"d/m/Y":i="/";break;case"d.m.Y":i=".";break;case"d-m-Y":i="-"}if(!1!==i){switch(t){case"datetime-local":var r=e.indexOf(" "),s=e.substring(0,r),_=e.substring(r);break;default:s=e,_=""}var o=s.split(i);if(3===o.length){var l=parseInt(o[0],10);s=parseInt(o[1],10)+"/"+l+"/"+parseInt(o[2],10)}e=s+_}return e=e.replace(/(\d+)(st|nd|rd|th)/g,"$1"),new Date(e)},$.WS_Form.prototype.get_date_by_type=function(e,t){if(!e)return"";var a=this.get_object_meta_value(t,"format_date",ws_form_settings.date_format);a||(a=ws_form_settings.date_format);var i=this.get_object_meta_value(t,"format_time",ws_form_settings.time_format);i||(i=ws_form_settings.time_format);var r=this.get_object_meta_value(t,"input_type_datetime","date");switch(r){case"datetime-local":case"date":switch(a){case"d/m/Y":var s=-1!==e.indexOf(" ")?[e.substring(0,e.indexOf(" ")),e.substring(e.indexOf(" ")+1)]:[e];e=(_=s[0].split("/"))[1]+"/"+_[0]+"/"+_[2]+(void 0!==s[1]?" "+s[1]:"");break;case"d-m-Y":s=-1!==e.indexOf(" ")?[e.substring(0,e.indexOf(" ")),e.substring(e.indexOf(" ")+1)]:[e];e=(_=s.split("-"))[1]+"/"+_[0]+"/"+_[2]+(void 0!==s[1]?" "+s[1]:"");break;case"d.m.Y":var _;s=-1!==e.indexOf(" ")?[e.substring(0,e.indexOf(" ")),e.substring(e.indexOf(" ")+1)]:[e];e=(_=s[0].split("."))[1]+"/"+_[0]+"/"+_[2]+(void 0!==s[1]?" "+s[1]:"")}}switch("time"!==r&&4===e.indexOf("-")&&-1===e.indexOf(":")&&(e+=" 00:00:00"),r){case"date":return e=new Date(e),this.date_format(e,a);case"month":return e=new Date(e),this.date_format(e,"F Y");case"time":return e=new Date("1970-01-01 "+e),this.date_format(e,i);case"week":return e=new Date(e),this.language("week")+" "+this.date_format(e,"W, Y");default:return e=new Date(e),this.date_format(e,a+" "+i)}},$.WS_Form.prototype.date_format=function(e,t){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_={d:function(){var e=this.getDate();return(e<10?"0":"")+e},D:function(){return r[this.getDay()]},j:function(){return this.getDate()},l:function(){return s[this.getDay()]},N:function(){var e=this.getDay();return 0===e?7:e},S:function(){var e=this.getDate();return e%10==1&&11!==e?"st":e%10==2&&12!==e?"nd":e%10==3&&13!==e?"rd":"th"},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},W:function(){var e=new Date(this.valueOf()),t=(this.getDay()+6)%7;e.setDate(e.getDate()-t+3);var a=e.valueOf();e.setMonth(0,1),4!==e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7);var i=1+Math.ceil((a-e)/6048e5);return i<10?"0"+i:i},F:function(){return i[this.getMonth()]},m:function(){var e=this.getMonth();return(e<9?"0":"")+(e+1)},M:function(){return a[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var e=this.getFullYear(),t=this.getMonth()+1;return 12===t&&(e=e++,t=0),new Date(e,t,0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){var e=this.getHours();return((e%12||12)<10?"0":"")+(e%12||12)},H:function(){var e=this.getHours();return(e<10?"0":"")+e},i:function(){var e=this.getMinutes();return(e<10?"0":"")+e},s:function(){var e=this.getSeconds();return(e<10?"0":"")+e},v:function(){var e=this.getMilliseconds();return(e<10?"00":e<100?"0":"")+e},e:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},I:function(){for(var e=null,t=0;t<12;++t){var a=new Date(this.getFullYear(),t,1).getTimezoneOffset();if(null===e)e=a;else{if(a<e){e=a;break}if(a>e)break}}return this.getTimezoneOffset()===e|0},O:function(){var e=this.getTimezoneOffset();return(-e<0?"-":"+")+(Math.abs(e/60)<10?"0":"")+Math.floor(Math.abs(e/60))+(0===Math.abs(e%60)?"00":(Math.abs(e%60)<10?"0":"")+Math.abs(e%60))},P:function(){var e=this.getTimezoneOffset();return(-e<0?"-":"+")+(Math.abs(e/60)<10?"0":"")+Math.floor(Math.abs(e/60))+":"+(0===Math.abs(e%60)?"00":(Math.abs(e%60)<10?"0":"")+Math.abs(e%60))},T:function(){var e=this.toLocaleTimeString(navigator.language,{timeZoneName:"short"}).split(" ");return e[e.length-1]},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return Math.floor(this.getTime()/1e3)}};return t.replace(/(\\?)(.)/g,function(t,a,i){return""===a&&_[i]?_[i].call(e):i})}}(jQuery);